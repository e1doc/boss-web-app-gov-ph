{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/pages/Bills.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/boss-web/src/pages/Bills.vue","mtime":1606242937935},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQcm9maWxlVGFibGVNZW51IGZyb20gIkAvY29tcG9uZW50cy90YWJsZXMvUHJvZmlsZVRhYmxlTWVudSI7CmltcG9ydCBCaWxsc1RhYmxlIGZyb20gIkAvY29tcG9uZW50cy90YWJsZXMvQmlsbHNUYWJsZSI7CmltcG9ydCBJbnZvaWNlRGlhbG9nIGZyb20gIkAvY29tcG9uZW50cy9wYXltZW50L0ludm9pY2VEaWFsb2ciOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCIKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQtdGltZXpvbmUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkJpbGxzIiwKICBjb21wb25lbnRzOiB7CiAgICBQcm9maWxlVGFibGVNZW51LAogICAgQmlsbHNUYWJsZSwKICAgIEludm9pY2VEaWFsb2csCiAgfSwKICBjb21wdXRlZDp7CiAgICAuLi5tYXBHZXR0ZXJzKFsnY3VycmVudFNlbGVjdGVkQnVzaW5lc3MnLCdnZW5lcmF0ZWRCaWxsJywgJ2N1cnJlbnRTb2FUeXBlJywgJ2N1cnJlbnRTZWxlY3RlZFByb3BlcnR5J10pCiAgfSwKICBtZXRob2RzOnsKICAgIG9uUGF5Q2xpY2soc3RhdHVzKXsKICAgICAgaWYoc3RhdHVzKXsKICAgICAgICB0aGlzLmNyZWF0ZVNvYSgpCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsnbmFtZSc6ICdQcm9maWxlJ30pCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBjcmVhdGVTb2EoKXsKICAgICAgbGV0IGJpbGxzID0gW10KICAgICAgdGhpcy5nZW5lcmF0ZWRCaWxsLmludm9pY2VzLmZvckVhY2goaXRlbT0+ewogICAgICAgIGxldCBmZWVzID0gW10KICAgICAgICBpdGVtLmZlZXMuZm9yRWFjaChlbGVtZW50PT57CiAgICAgICAgICBsZXQgZmVlID0gewogICAgICAgICAgICBmZWVfZGVzY3JpcHRpb246IGVsZW1lbnQuZmVlX2Rlc2NyaXB0aW9uLAogICAgICAgICAgICBhbW91bnQ6IGVsZW1lbnQuYW1vdW50LAogICAgICAgICAgICBjb2RlOiBlbGVtZW50LmZlZWNvZGUsCiAgICAgICAgICAgIHBlbmFsdHk6IGVsZW1lbnQuaXNwZW5hbHR5ID09ICIwIiA/IGZhbHNlIDogdHJ1ZQogICAgICAgICAgfQogICAgICAgICAgZmVlcy5wdXNoKGZlZSkKICAgICAgICB9KQogICAgICAgIGxldCBiaWxsID0gewogICAgICAgICAgcmVmZXJlbmNlX251bWJlcjogaXRlbS5yZWZlcmVuY2VubywKICAgICAgICAgIHF1YXJ0ZXI6IGl0ZW0ucXVhcnRlciwKICAgICAgICAgIGFtb3VudDogaXRlbS5hbW91bnQsCiAgICAgICAgICBkdWVfZGF0ZTogbW9tZW50KGl0ZW0uZHVlZGF0ZSksCiAgICAgICAgICBmZWVzOiBmZWVzCiAgICAgICAgfQogICAgICAgIGJpbGxzLnB1c2goYmlsbCkKICAgICAgfSkKICAgICAgY29uc3QgcGF5bG9hZCA9IHsKICAgICAgICBzb2E6IHsKICAgICAgICAgIHllYXI6IHRoaXMuZ2VuZXJhdGVkQmlsbC55ZWFyLAogICAgICAgICAgcXVhcnRlcjogdGhpcy5nZW5lcmF0ZWRCaWxsLnF1YXJ0ZXIsCiAgICAgICAgICBwYXltb2RlOiB0aGlzLmdlbmVyYXRlZEJpbGwucGF5bW9kZSwKICAgICAgICAgIGFtb3VudDogdGhpcy5nZW5lcmF0ZWRCaWxsLnRvdGFsX2Ftb3VudCwKICAgICAgICAgIGJ1c2luZXNzX2FwcGxpY2F0aW9uOiB0aGlzLmN1cnJlbnRTb2FUeXBlID09PSAnYnVzaW5lc3MnID8gdGhpcy5jdXJyZW50U2VsZWN0ZWRCdXNpbmVzcy5pZCA6IG51bGwsCiAgICAgICAgICBidWlsZGluZ19hcHBsaWNhdGlvbjogdGhpcy5jdXJyZW50U29hVHlwZSA9PT0gJ3JlYWxfcHJvcGVydHknID8gdGhpcy5jdXJyZW50U2VsZWN0ZWRQcm9wZXJ0eS5pZCA6IG51bGwsCiAgICAgICAgICBiaWxsczogYmlsbHMsCiAgICAgICAgICBhcHBsaWNhdGlvbl90eXBlOiB0aGlzLmN1cnJlbnRTb2FUeXBlCiAgICAgICAgfQogICAgICB9CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjcmVhdGVTb2EnLCBwYXlsb2FkKQogICAgfQogIH0KfTsK"},{"version":3,"sources":["Bills.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Bills.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <section>\n    <modal\n      name=\"invoiceModal\"\n      height=\"auto\"\n      :adaptive=\"true\"\n      :classes=\"['vue-modal-2']\"\n      ><invoice-dialog\n    /></modal>\n    <div class=\"container\">\n      <div class=\"mt50 invoice-header\">\n        <profile-table-menu type=\"bills\" />\n      </div>\n      <div class=\"mt50 bills-table\">\n        <bills-table />\n      </div>\n      <div class=\"bills-actions\">\n        <div class=\"pay-button\" @click=\"onPayClick(true)\">\n          <font-awesome-icon icon=\"receipt\" class=\"mr5 icon\" />GENERATE SOA\n        </div>\n        <div class=\"cancel-button\" @click=\"onPayClick(false)\">\n          <font-awesome-icon icon=\"times\" class=\"mr5 icon\" />GENERATE LATER\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport ProfileTableMenu from \"@/components/tables/ProfileTableMenu\";\nimport BillsTable from \"@/components/tables/BillsTable\";\nimport InvoiceDialog from \"@/components/payment/InvoiceDialog\";\nimport { mapGetters } from \"vuex\"\nimport moment from \"moment-timezone\";\nexport default {\n  name: \"Bills\",\n  components: {\n    ProfileTableMenu,\n    BillsTable,\n    InvoiceDialog,\n  },\n  computed:{\n    ...mapGetters(['currentSelectedBusiness','generatedBill', 'currentSoaType', 'currentSelectedProperty'])\n  },\n  methods:{\n    onPayClick(status){\n      if(status){\n        this.createSoa()\n      }else{\n        this.$router.push({'name': 'Profile'})\n      }\n    },\n    async createSoa(){\n      let bills = []\n      this.generatedBill.invoices.forEach(item=>{\n        let fees = []\n        item.fees.forEach(element=>{\n          let fee = {\n            fee_description: element.fee_description,\n            amount: element.amount,\n            code: element.feecode,\n            penalty: element.ispenalty == \"0\" ? false : true\n          }\n          fees.push(fee)\n        })\n        let bill = {\n          reference_number: item.referenceno,\n          quarter: item.quarter,\n          amount: item.amount,\n          due_date: moment(item.duedate),\n          fees: fees\n        }\n        bills.push(bill)\n      })\n      const payload = {\n        soa: {\n          year: this.generatedBill.year,\n          quarter: this.generatedBill.quarter,\n          paymode: this.generatedBill.paymode,\n          amount: this.generatedBill.total_amount,\n          business_application: this.currentSoaType === 'business' ? this.currentSelectedBusiness.id : null,\n          building_application: this.currentSoaType === 'real_property' ? this.currentSelectedProperty.id : null,\n          bills: bills,\n          application_type: this.currentSoaType\n        }\n      }\n      await this.$store.dispatch('createSoa', payload)\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n/deep/ .vm--modal {\n  overflow: auto;\n  width: 100%;\n}\n/deep/ .vm--modal::-webkit-scrollbar {\n  display: none;\n}\nsection {\n  // min-height: calc( 100vh - 321px);\n  padding-bottom: 30px;\n}\n\n.bills-actions {\n  max-width: 458px;\n  margin: 0 auto;\n  display: flex;\n  flex-wrap: wrap;\n\n  .pay-button {\n    color: #ffffff;\n    background-color: #039be5;\n    font-size: 13px;\n    font-weight: bold;\n    text-align: center;\n    max-width: 125px;\n    float: left;\n    padding: 18px 40px;\n    min-width: 125px;\n    margin: 0 10px 3px;\n    border: 2px #039be5 solid;\n    border-radius: 5px;\n    transition: 0.4s;\n    cursor: pointer;\n  }\n  .pay-button:hover {\n    color: #039be5;\n    background-color: transparent;\n  }\n\n  .cancel-button {\n    color: #d32f2f;\n    background-color: transparent;\n    font-size: 13px;\n    font-weight: bold;\n    text-align: center;\n    max-width: 125px;\n    float: left;\n    padding: 18px 40px;\n    margin: 0 10px 3px;\n    border: 2px #d32f2f solid;\n    border-radius: 5px;\n    transition: 0.4s;\n    cursor: pointer;\n  }\n  .cancel-button:hover {\n    color: #ffffff;\n    background-color: #d32f2f;\n  }\n}\n\n.bills-table {\n  margin-bottom: 50px;\n}\n\n@media only screen and (max-width: 768px) {\n  .invoice-header,\n  .bills-table {\n    margin-top: 30px;\n  }\n}\n</style>\n"]}]}