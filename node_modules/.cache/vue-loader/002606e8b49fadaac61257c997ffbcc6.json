{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/pages/NewInquiry.vue?vue&type=style&index=0&id=41353f25&lang=scss&scoped=true&","dependencies":[{"path":"/var/www/html/boss-web/src/pages/NewInquiry.vue","mtime":1605179000991},{"path":"/var/www/html/boss-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpkaXYuaW5xdWlyeS1ib3ggewogIHdpZHRoOiAxMDAlOwogIG1heC13aWR0aDogMTA1MHB4OwogIG1hcmdpbjogMCBhdXRvOwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm94LXNoYWRvdzogMHB4IDEwcHggMjBweCAjMDAwMDAwMGQ7CiAgYm9yZGVyLXJhZGl1czogMjBweDsKICBtYXJnaW4tdG9wOiAzMHB4OwogIG1hcmdpbi1ib3R0b206IDUwcHg7CiAgZGl2LmlucXVpcnktaGVhZGVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICMxNDkyZTY7CiAgICBwYWRkaW5nOiAyMHB4IDQwcHg7CiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAyMHB4OwogICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDIwcHg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBkaXYuaW5xdWlyeS1zdWJqIHsKICAgICAgY29sb3I6ICNmYWZhZmE7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7CiAgICAgIGxldHRlci1zcGFjaW5nOiAxLjA2cHg7CiAgICAgIG1hcmdpbi1ib3R0b206IDVweDsKICAgIH0KICAgIGRpdi5pbnF1aXJ5LWRhdGUgewogICAgICBjb2xvcjogI2U2ZTZlNjsKICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICBsaW5lLWhlaWdodDogMS40OwogICAgICBsZXR0ZXItc3BhY2luZzogMC44cHg7CiAgICB9CiAgICBkaXYuYXBwbGljYXRpb24tYnV0dG9uIHsKICAgICAgd2lkdGg6IGF1dG87CiAgICAgIGZsb2F0OiByaWdodDsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICByaWdodDogNDVweDsKICAgICAgdG9wOiAyNXB4OwogICAgfQogIH0KICBkaXYuaW5xdWlyeS1ib2R5IHsKICAgIHBhZGRpbmc6IDM1cHggNDhweDsKICAgIC5pdGVtLXJvdyB7CiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICB9CgogICAgLml0ZW0tcm93LnNlbmRlciB7CiAgICAgIC5pdGVtLWNvbnRlbnQgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlYWY2ZmY1MDsKICAgICAgfQogICAgfQoKICAgIC5pdGVtLXJvdy5tZSB7CiAgICAgIC5pdGVtLW5hbWUgewogICAgICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgICB9CiAgICAgIC5pdGVtLWNvbnRlbnQgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlYWY2ZmY5MDsKICAgICAgfQogICAgfQoKICAgIC5pdGVtLW5hbWUgewogICAgICBjb2xvcjogIzE3OTJlNjsKICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgbGluZS1oZWlnaHQ6IDI5cHg7CiAgICAgIGxldHRlci1zcGFjaW5nOiAwLjMycHg7CiAgICAgIG1hcmdpbi1ib3R0b206IDZweDsKICAgIH0KCiAgICAuaXRlbS1jb250ZW50IHsKICAgICAgY29sb3I6ICMwMDAwMDBjMTsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBsaW5lLWhlaWdodDogMjhweDsKICAgICAgcGFkZGluZzogMzVweCAzMnB4OwogICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgfQoKICAgIC5pdGVtLWRhdGUgewogICAgICBjb2xvcjogI2IzZDdmZTsKICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICBsaW5lLWhlaWdodDogMS42OwogICAgICBsZXR0ZXItc3BhY2luZzogMC4yNHB4OwogICAgICB0ZXh0LWFsaWduOiByaWdodDsKICAgIH0KCiAgICBkaXYuaW5xdWlyeS1uZXcgewogICAgICBkaXYuaW5xdWlyeS1uZXctdGV4dCB7CiAgICAgICAgY29sb3I6ICM5ZmE2YWI7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgIGxpbmUtaGVpZ2h0OiAyOXB4OwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgLmFkbWluLWljb24gewogICAgICAgICAgZm9udC1zaXplOiAyMXB4OwogICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNHB4OwogICAgICAgIH0KICAgICAgfQogICAgICAuaW5wdXQtc3ViamVjdCB7CiAgICAgICAgY29sb3I6ICMyYjJiMmI7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2QwZTlmYTsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgZm9udC1mYW1pbHk6IFJhbGV3YXk7CiAgICAgICAgbGluZS1oZWlnaHQ6IDI4cHg7CiAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDYwcHgpOwogICAgICAgIHBhZGRpbmc6IDEzcHggMzBweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgICAgb3V0bGluZTogMDsKICAgICAgICB0cmFuc2l0aW9uOiAwLjRzOwogICAgICB9CiAgICAgIHRleHRhcmVhIHsKICAgICAgICBjb2xvcjogIzJiMmIyYjsKICAgICAgICBib3JkZXItY29sb3I6ICNkMGU5ZmE7CiAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIGZvbnQtZmFtaWx5OiBSYWxld2F5OwogICAgICAgIGxpbmUtaGVpZ2h0OiAyOHB4OwogICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA2MHB4KTsKICAgICAgICBtYXgtaGVpZ2h0OiAxNTBweDsKICAgICAgICBwYWRkaW5nOiAyNXB4IDMwcHg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgICAgIHRyYW5zaXRpb246IDAuNHM7CiAgICAgIH0KICAgICAgdGV4dGFyZWE6Zm9jdXMsCiAgICAgIGlucHV0OmZvY3VzIHsKICAgICAgICBvdXRsaW5lOiAwOwogICAgICAgIGJvcmRlci1jb2xvcjogIzAyN2FiNSAhaW1wb3J0YW50OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGZjZmYgIWltcG9ydGFudDsKICAgICAgfQoKICAgICAgLmlucXVpcnktYnV0dG9uIHsKICAgICAgICB0ZXh0LWFsaWduOiByaWdodDsKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["NewInquiry.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"NewInquiry.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"inquiry-box\">\n    <div class=\"inquiry-header\">\n      <div class=\"inquiry-subj\">\n        New {{ type === \"inquiry\" ? \"Inquiry\" : \"Remarks\" }}\n      </div>\n      <!-- <div class=\"application-button\">\n                 <button-block type=\"default\" class=\"inquiry-application-btn\" />\n             </div> -->\n      <div class=\"inquiry-date\">\n        Date: {{ new Date(Date.now()) | moment(\"MMMM DD YYYY\") }}\n      </div>\n    </div>\n    <div class=\"inquiry-body\">\n      <!-- REPLY SECTION -->\n      <div class=\"inquiry-new\">\n        <div class=\"inquiry-new-text\">SUBJECT</div>\n        <input\n          type=\"text\"\n          name=\"subject\"\n          id=\"subject\"\n          class=\"input-subject\"\n          placeholder=\"Type your subject here\"\n          v-model=\"subject\"\n          :disabled=\"type === 'inquiry' ? false : true\"\n        />\n        <div class=\"inquiry-new-text\">\n          {{ type === \"inquiry\" ? \"Inquiry\" : \"Remarks\" }}\n        </div>\n        <textarea\n          name=\"inquiry\"\n          id=\"inquiry\"\n          rows=\"6\"\n          placeholder=\"Type your text here\"\n          v-model=\"body\"\n        ></textarea>\n        <div class=\"inquiry-button\">\n          <button-block\n            type=\"send\"\n            :disabled=\"body === '' || subject === '' ? true : false\"\n            @click.native=\"sendMessage\"\n            >SEND</button-block\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport InquiryTableMenu from \"@/components/tables/InquiryTableMenu\";\nimport InquiryTable from \"@/components/tables/InquiryTable\";\nimport ButtonBlock from \"@/components/ButtonBlock\";\nimport BaseInput from \"@/components/forms/BaseInput\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"ReplyInquiry\",\n  components: {\n    InquiryTableMenu,\n    InquiryTable,\n    ButtonBlock,\n    BaseInput,\n  },\n  computed: {\n    ...mapGetters([\n      \"currentTable\",\n      \"currentInquiry\",\n      \"remarks\",\n      \"buildingApplication\",\n      \"businessApplication\"\n    ]),\n  },\n  props: {\n    application_number: {\n      type: String,\n      default: \"\",\n    },\n    application_type: {\n      type: String,\n      default: \"\",\n    },\n    user: {\n      type: Number,\n    },\n  },\n  data() {\n    return {\n      subject: \"\",\n      body: \"\",\n      type: \"\",\n      applicationType: \"\",\n      applicationNumber: \"\",\n      receiver: \"\",\n    };\n  },\n  mounted() {\n    this.getRemarks();\n    console.log(this.buildingApplication)\n  },\n    beforeRouteLeave(to, from, next) {\n      this.$store.dispatch(\"setApplicationStateRemarks\", {});\n      this.$store.commit('setCurrentInquiry', \"\")\n      next()\n  },\n  methods: {\n    async getRemarks() {\n      console.log('remarks', this.remarks)\n      if (!this.remarks.application_number) {\n        if (this.application_number !== \"\") {\n          console.log('application number', this.application_number)\n          await this.$store.dispatch(\"setApplicationStateRemarks\", {\n            application_number: this.application_number,\n            application_type: this.application_type,\n            user: this.user,\n          });\n          this.subject = `Application #${this.application_number} Remarks`;\n          this.type = \"remarks\";\n          this.applicationType = this.application_type;\n          this.applicationNumber = this.application_number;\n          this.receiver = this.user;\n        } else {\n          this.type = \"inquiry\";\n        }\n      } else {\n        this.subject = `Application #${this.remarks.application_number} Remarks`;\n        this.type = \"remarks\";\n        this.applicationType = this.remarks.application_type;\n        this.applicationNumber = this.remarks.application_number;\n        this.receiver = this.remarks.user;\n      }\n    },\n    async sendMessage() {\n      await this.$store.commit(\"setLoading\", true);\n      await this.$store.dispatch(\"addThread\", {\n        subject: this.subject,\n        is_remarks: this.type === \"remarks\" ? true : false,\n        business_id:\n          this.applicationType === \"business\" ? this.applicationNumber : null,\n        building_id:\n          this.applicationType === \"building\" ? this.applicationNumber : null,\n        receiver: this.type === \"remarks\" ? this.receiver : null,\n      });\n      await this.$store.dispatch(\"addMessage\", {\n        thread: this.currentInquiry,\n        body: this.body,\n      });\n      await this.$store.commit(\"setLoading\", false);\n      if (this.type === \"remarks\") {\n        if (this.applicationType === \"building\") {\n          let application_status = 0\n          this.buildingApplication.application_status === 0\n            ? application_status = 1\n            : this.buildingApplication.application_status === 3\n            ? application_status = 4\n            : application_status = 0\n          let payload = { id: this.applicationNumber, status: application_status };\n          this.$store.dispatch(\"approveBuildingApplication\", payload);\n          if(this.buildingApplication.application_status === 3){\n            let resetAssessmentPayload = {building_application: this.buildingApplication.id}\n            this.$store.dispatch('resetBuildingAssessment', resetAssessmentPayload)\n          }\n        } else if (this.applicationType === \"business\") {\n          let application_status = 0\n          this.businessApplication.application_status === 0\n            ? application_status = 1\n            : this.businessApplication.application_status === 2\n            ? application_status = 3\n            : application_status = 0\n          let payload = { id: this.applicationNumber, status: application_status };\n          this.$store.dispatch(\"approveBusinessApplication\", payload);\n          if(this.businessApplication.application_status === 2){\n            let resetAssessmentPayload = {business_application: this.businessApplication.id}\n            this.$store.dispatch('resetBusinessAssessment', resetAssessmentPayload)\n          }\n        }\n      } else {\n        await this.$swal({\n          title: \"Success!\",\n          text: \"Inquiry successfully sent.\",\n          icon: \"success\",\n        }).then((value) => {\n          if (this.type === \"inquiry\") {\n            this.$router.push({ name: \"UserInquiries\" });\n          } else if (this.type === \"remarks\") {\n            this.$router.push({ name: \"Inquiries\" });\n          }\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\ndiv.inquiry-box {\n  width: 100%;\n  max-width: 1050px;\n  margin: 0 auto;\n  background-color: #fff;\n  box-shadow: 0px 10px 20px #0000000d;\n  border-radius: 20px;\n  margin-top: 30px;\n  margin-bottom: 50px;\n  div.inquiry-header {\n    background-color: #1492e6;\n    padding: 20px 40px;\n    border-top-left-radius: 20px;\n    border-top-right-radius: 20px;\n    position: relative;\n    div.inquiry-subj {\n      color: #fafafa;\n      font-size: 20px;\n      font-weight: bold;\n      line-height: 1.6;\n      letter-spacing: 1.06px;\n      margin-bottom: 5px;\n    }\n    div.inquiry-date {\n      color: #e6e6e6;\n      font-size: 16px;\n      line-height: 1.4;\n      letter-spacing: 0.8px;\n    }\n    div.application-button {\n      width: auto;\n      float: right;\n      position: absolute;\n      right: 45px;\n      top: 25px;\n    }\n  }\n  div.inquiry-body {\n    padding: 35px 48px;\n    .item-row {\n      margin-bottom: 10px;\n    }\n\n    .item-row.sender {\n      .item-content {\n        background-color: #eaf6ff50;\n      }\n    }\n\n    .item-row.me {\n      .item-name {\n        text-align: right;\n      }\n      .item-content {\n        background-color: #eaf6ff90;\n      }\n    }\n\n    .item-name {\n      color: #1792e6;\n      font-size: 16px;\n      font-weight: bold;\n      line-height: 29px;\n      letter-spacing: 0.32px;\n      margin-bottom: 6px;\n    }\n\n    .item-content {\n      color: #000000c1;\n      font-size: 14px;\n      line-height: 28px;\n      padding: 35px 32px;\n      border-radius: 12px;\n    }\n\n    .item-date {\n      color: #b3d7fe;\n      font-size: 12px;\n      line-height: 1.6;\n      letter-spacing: 0.24px;\n      text-align: right;\n    }\n\n    div.inquiry-new {\n      div.inquiry-new-text {\n        color: #9fa6ab;\n        font-size: 16px;\n        font-weight: bold;\n        line-height: 29px;\n        margin-bottom: 10px;\n        .admin-icon {\n          font-size: 21px;\n          margin-right: 14px;\n        }\n      }\n      .input-subject {\n        color: #2b2b2b;\n        border: 1px solid #d0e9fa;\n        font-size: 14px;\n        font-family: Raleway;\n        line-height: 28px;\n        width: calc(100% - 60px);\n        padding: 13px 30px;\n        margin-bottom: 30px;\n        border-radius: 12px;\n        outline: 0;\n        transition: 0.4s;\n      }\n      textarea {\n        color: #2b2b2b;\n        border-color: #d0e9fa;\n        font-size: 14px;\n        font-family: Raleway;\n        line-height: 28px;\n        width: calc(100% - 60px);\n        max-height: 150px;\n        padding: 25px 30px;\n        margin-bottom: 15px;\n        border-radius: 12px;\n        transition: 0.4s;\n      }\n      textarea:focus,\n      input:focus {\n        outline: 0;\n        border-color: #027ab5 !important;\n        background-color: #f8fcff !important;\n      }\n\n      .inquiry-button {\n        text-align: right;\n      }\n    }\n  }\n}\n</style>\n"]}]}