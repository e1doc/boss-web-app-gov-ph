{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/components/application/RenewalBusinessUploadStep.vue?vue&type=style&index=0&id=14be1c5b&lang=scss&scoped=true&","dependencies":[{"path":"/var/www/html/boss-web/src/components/application/RenewalBusinessUploadStep.vue","mtime":1612455150458},{"path":"/var/www/html/boss-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpkaXYubWV0YS1jb250YWluZXIgewogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmc6IDUwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VhZjZmZjsKICBib3JkZXItcmFkaXVzOiAyMHB4OwogIGgxLm1ldGEtZm9ybS10aXRsZSB7CiAgICBtYXJnaW4tYm90dG9tOiA0MHB4OwogIH0KICAubWV0YS1ub3RlIHsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGNvbG9yOiAjN2FjMGZhOwogICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICB9CiAgLm1ldGEtY3VzdG9tLXVwbG9hZCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC13cmFwOiB3cmFwOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgYm9yZGVyOiAzcHggZGFzaGVkICNiY2UwZmQ7CiAgICBwYWRkaW5nOiA1MHB4IDMwcHg7CiAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgdHJhbnNpdGlvbjogMC40czsKCiAgICBpbnB1dFt0eXBlPSJmaWxlIl0gewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHotaW5kZXg6IDI7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIG9wYWNpdHk6IDA7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIH0KICAgIC5tZXRhLXRleHQuYmlnIHsKICAgICAgY29sb3I6ICM2NGI0Zjk7CiAgICAgIGZvbnQtc2l6ZTogMzBweDsKICAgICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgdHJhbnNpdGlvbjogMC40czsKICAgIH0KICAgIC5tZXRhLXRleHQuc21hbGwgewogICAgICBjb2xvcjogIzY0YjRmOTsKICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICBmb250LXdlaWdodDogNzAwOwogICAgICBsaW5lLWhlaWdodDogMS42OwogICAgICB0cmFuc2l0aW9uOiAwLjRzOwogICAgfQogIH0KICBkaXYuYnV0dG9uLWxlZnQtcmlnaHQgewogICAgd2lkdGg6IDEwMCU7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC13cmFwOiB3cmFwOwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgLmJhY2stYnV0dG9uIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzczYmVmYzsKICAgICAgYm9yZGVyLWNvbG9yOiAjNzNiZWZjOwogICAgfQogIH0KfQoKZGl2Lm1ldGEtY29udGFpbmVyIC5tZXRhLWN1c3RvbS11cGxvYWQ6aG92ZXIgewogIGJvcmRlci1jb2xvcjogIzAzOWJlNTsKfQoKZGl2Lm1ldGEtY29udGFpbmVyIC5tZXRhLWN1c3RvbS11cGxvYWQ6aG92ZXIgZGl2Lm1ldGEtdGV4dCB7CiAgY29sb3I6ICMwMzliZTU7Cn0KCi5iYWNrLWJ1dHRvbjpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI2OTlmYiAhaW1wb3J0YW50OwogIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7CiAgYm9yZGVyLWNvbG9yOiAjMjY5OWZiICFpbXBvcnRhbnQ7Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTM4MHB4KSB7CiAgZGl2Lm1ldGEtY29udGFpbmVyIGgxLm1ldGEtZm9ybS10aXRsZSB7CiAgICBmb250LXNpemU6IDIycHg7CiAgfQp9Cg=="},{"version":3,"sources":["RenewalBusinessUploadStep.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"RenewalBusinessUploadStep.vue","sourceRoot":"src/components/application","sourcesContent":["<template>\n  <div class=\"meta-container flex-center\">\n    <h1 class=\"meta-form-title\">Upload your Requirements</h1>\n    <div class=\"meta-note\">\n      Almost Done! Please upload your file. Only allowed format - jpg, jpeg, png\n      or pdf file.\n    </div>\n    <base-file-uploader\n      label=\"1. Copy of your latest Business Permit\"\n      type=\"business\"\n      fileLabel=\"latest_business_permit\"\n      :hasError=\"uploadErrors.latest_business_permit\"\n      :properties=\"getProperty('latest_business_permit')\"\n    />\n    <base-file-uploader\n      label=\"2. Basis for computing taxes, Last year BIR Income Tax Return (170IQ or 1701A) or Last year BIR 2550M/2550Q/2551Q or the Audited Financial Statement\"\n      description=\"<b>Note:</b><br> <br>  a. Itemized gross sale of all branches for business establishments with multiple locations.\n\t <br> <br> b. Copy of last year BIR 1701A(ITR)\"\n      :properties=\"getProperty('computing_taxes_basis')\"\n      fileLabel=\"computing_taxes_basis\"\n      type=\"business\"\n      uploadType=\"application/pdf\"\n      :hasError=\"uploadErrors.computing_taxes_basis\"\n    />\n    <base-file-uploader\n      label=\"3. One government issued ID\"\n      :properties=\"getProperty('government_id')\"\n      :hasError=\"uploadErrors.government_id\"\n      fileLabel=\"government_id\"\n      type=\"business\"\n    />\n    <div class=\"meta-form-group button-left-right\">\n      <button-block\n        type=\"back\"\n        class=\"back-button\"\n        @click.native=\"previousStep()\"\n        >BACK</button-block\n      >\n      <button-block class=\"next-button\" @click.native=\"nextStep()\"\n        >NEXT</button-block\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport ButtonBlock from \"@/components/ButtonBlock\";\nimport BaseFileUploader from \"@/components/forms/BaseFileUploader\";\nimport BaseSelect from \"@/components/forms/BaseSelect\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"RenewalBusinessUploadStep\",\n  components: {\n    ButtonBlock,\n    BaseFileUploader,\n    BaseSelect,\n  },\n  data() {\n    return {\n      required: [\n        \"latest_business_permit\",\n        \"computing_taxes_basis\",\n        \"government_id\",\n      ],\n      uploadErrors: {\n        latest_business_permit: false,\n        computing_taxes_basis: false,\n        government_id: false,\n      },\n    };\n  },\n  computed: {\n    ...mapGetters([\n      \"applicationRequirements\",\n      \"requirements\",\n      \"draftBusiness\",\n      \"businessApplication\",\n      \"businessBasicInformation\",\n    ]),\n  },\n  mounted() {\n    this.scrollToTop();\n    this.getRequirements();\n  },\n  methods: {\n    scrollToTop() {\n      window.scrollTo(0, 0);\n    },\n    validateRequiredFields() {\n      let validated = [];\n      if (this.requirements) {\n        if (this.requirements.requirements) {\n          if (this.requirements.requirements.length > 0) {\n            this.requirements.requirements.map((item) => {\n              if (!validated.includes(item.requirements_label)) {\n                if (this.required.includes(item.requirements_label)) {\n                  validated.push(item.requirements_label);\n                }\n              }\n            });\n          } else {\n            this.required.forEach((element) => {\n              this.uploadErrors[`${element}`] = true;\n            });\n          }\n          this.required.forEach((element) => {\n            if (!validated.includes(element)) {\n              this.uploadErrors[`${element}`] = true;\n            }\n          });\n          if (validated.length === this.required.length) {\n            return true;\n          } else {\n            return false;\n          }\n        } else {\n          this.required.forEach((element) => {\n            this.uploadErrors[`${element}`] = true;\n          });\n          return false;\n        }\n      }\n    },\n    previousStep() {\n      this.$store.commit(\"setCurrentApplicationStep\", \"1\");\n    },\n    async nextStep() {\n      if (!this.draftBusiness) {\n        this.$store.commit(\"setLoading\", true);\n        let isValidated = this.validateRequiredFields();\n        if (isValidated) {\n          let application_status;\n          this.businessApplication.application_status == 1\n            ? (application_status = 0)\n            : this.businessApplication.application_status == 3\n            ? (application_status = 2)\n            : (application_status = 0);\n          let payload = {\n            is_draft: false,\n            application_status: application_status,\n            last_submitted: new Date(Date.now()),\n            is_disapprove: false,\n            is_approve: false,\n            latest_approver: \"\",\n            on_renewal: true,\n            application_type: \"renewal\",\n          };\n          await this.$store.dispatch(\"updateBusinessApplication\", payload);\n          await this.$store.dispatch(\n            \"updateBusinessBasicInformation\",\n            this.businessBasicInformation\n          );\n          await this.$store.dispatch(\"renewBusinessApplication\");\n          let resetAssessmentPayload = {\n            business_application: this.businessApplication.id,\n          };\n          await this.$store.dispatch(\n            \"resetBusinessAssessment\",\n            resetAssessmentPayload\n          );\n          this.$store.commit(\"setCurrentApplicationStep\", \"3\");\n        } else {\n          this.$swal({\n            title: \"Failed!\",\n            text:\n              \"Please upload the remaining requirements before you submit the application.\",\n            icon: \"error\",\n          });\n        }\n      }\n      this.$store.commit(\"setLoading\", false);\n    },\n    async getRequirements() {\n      if (this.applicationRequirements.id) {\n        await this.$store.dispatch(\"getApplicationRequirements\");\n      }\n    },\n    getProperty(key) {\n      if (this.requirements.id) {\n        if (this.requirements.requirements.length > 0) {\n          let property = {};\n          property = this.requirements.requirements.find((element) => {\n            if (element.requirements_label === key) {\n              return element;\n            }\n          });\n          return property;\n        }\n      }\n    },\n  },\n  watch: {\n    draftBusiness: {\n      deep: true,\n      handler(status) {\n        if (status) {\n          this.$swal({\n            title: \"Success!\",\n            text: \"data successfully saved as draft.\",\n            icon: \"success\",\n          }).then((value) => {\n            this.$store.commit(\"setDraftBusiness\", false);\n            this.$router.push({ name: \"Profile\" });\n          });\n        }\n      },\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\ndiv.meta-container {\n  width: 100%;\n  padding: 50px;\n  background-color: #eaf6ff;\n  border-radius: 20px;\n  h1.meta-form-title {\n    margin-bottom: 40px;\n  }\n  .meta-note {\n    font-size: 16px;\n    color: #7ac0fa;\n    margin-bottom: 30px;\n  }\n  .meta-custom-upload {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    border: 3px dashed #bce0fd;\n    padding: 50px 30px;\n    margin-bottom: 30px;\n    transition: 0.4s;\n\n    input[type=\"file\"] {\n      position: absolute;\n      z-index: 2;\n      height: 100%;\n      width: 100%;\n      opacity: 0;\n      cursor: pointer;\n    }\n    .meta-text.big {\n      color: #64b4f9;\n      font-size: 30px;\n      font-weight: 700;\n      line-height: 1.6;\n      text-transform: uppercase;\n      width: 100%;\n      text-align: center;\n      transition: 0.4s;\n    }\n    .meta-text.small {\n      color: #64b4f9;\n      font-size: 18px;\n      font-weight: 700;\n      line-height: 1.6;\n      transition: 0.4s;\n    }\n  }\n  div.button-left-right {\n    width: 100%;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    .back-button {\n      background-color: #73befc;\n      border-color: #73befc;\n    }\n  }\n}\n\ndiv.meta-container .meta-custom-upload:hover {\n  border-color: #039be5;\n}\n\ndiv.meta-container .meta-custom-upload:hover div.meta-text {\n  color: #039be5;\n}\n\n.back-button:hover {\n  background-color: #2699fb !important;\n  color: #fff !important;\n  border-color: #2699fb !important;\n}\n\n@media only screen and (max-width: 1380px) {\n  div.meta-container h1.meta-form-title {\n    font-size: 22px;\n  }\n}\n</style>"]}]}