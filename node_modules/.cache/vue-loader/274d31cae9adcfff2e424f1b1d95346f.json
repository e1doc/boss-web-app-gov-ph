{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/pages/RealPropertyEnrollment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/boss-web/src/pages/RealPropertyEnrollment.vue","mtime":1607496732759},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCYXNlSW5wdXRJY29uRW5kIGZyb20gIkAvY29tcG9uZW50cy9mb3Jtcy9CYXNlSW5wdXRJY29uRW5kIjsKaW1wb3J0IEJ1dHRvbkJsb2NrIGZyb20gIkAvY29tcG9uZW50cy9CdXR0b25CbG9jayI7CmltcG9ydCBCYXNlRGF0ZVBpY2tlciBmcm9tICJAL2NvbXBvbmVudHMvZm9ybXMvQmFzZURhdGVQaWNrZXIiOwppbXBvcnQgRW5yb2xsbWVudFN1Y2Nlc3MgZnJvbSAiQC9jb21wb25lbnRzL2Vucm9sbG1lbnQvRW5yb2xsbWVudFN1Y2Nlc3MiOwppbXBvcnQgQmFzZVNlbGVjdCBmcm9tICJAL2NvbXBvbmVudHMvZm9ybXMvQmFzZVNlbGVjdCI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKY29uc3Qgb25lRG9jVG9rZW4gPSBwcm9jZXNzLmVudi5WVUVfQVBQX09ORV9ET0NfVE9LRU47CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVhbFByb3BlcnR5RW5yb2xsbWVudCIsCiAgY29tcG9uZW50czogewogICAgQmFzZUlucHV0SWNvbkVuZCwKICAgIEJ1dHRvbkJsb2NrLAogICAgQmFzZURhdGVQaWNrZXIsCiAgICBFbnJvbGxtZW50U3VjY2VzcywKICAgIEJhc2VTZWxlY3QsCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImF1dGhUb2tlbiJdKSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCBmYWxzZSk7CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGRfbm86ICIiLAogICAgICBvZmZpY2lhbF9yZWNlaXB0OiAiIiwKICAgICAgZGF0ZTogIiIsCiAgICAgIGlzU3VjY2VzczogZmFsc2UsCiAgICAgIHByb3BlcnR5X3R5cGU6ICIiLAogICAgICByZXF1aXJlZF9maWVsZHM6IFsicHJvcGVydHlfdHlwZSIsICJ0ZF9ubyIsICJvZmZpY2lhbF9yZWNlaXB0IiwgImRhdGUiXSwKICAgICAgcHJvcGVydHl0eXBlOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJMYW5kIiwKICAgICAgICAgIHZhbHVlOiAiTGFuZCIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIkJ1aWxkaW5nIiwKICAgICAgICAgIHZhbHVlOiAiQnVpbGRpbmciLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJNYWNoaW5lcnkiLAogICAgICAgICAgdmFsdWU6ICJNYWNoaW5lcnkiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgdmVyaWZ5KCkgewogICAgICBsZXQgcGF5bG9hZCA9IHsKICAgICAgICBuYW1lOiAiUmVhbFByb3BlcnR5VGF4RW5yb2xsbWVudCIsCiAgICAgICAgcGFyYW06IHsKICAgICAgICAgIHByb3BlcnR5X3R5cGU6IHRoaXMucHJvcGVydHlfdHlwZSwKICAgICAgICAgIHRkbm86IHRoaXMudGRfbm8sCiAgICAgICAgICBvcmRhdGU6IHRoaXMuZGF0ZSwKICAgICAgICAgIG9ybnVtYmVyOiB0aGlzLm9mZmljaWFsX3JlY2VpcHQsCiAgICAgICAgfSwKICAgICAgfTsKICAgICAgYXdhaXQgdGhpcy5wcm9wZXJ0eUVucm9sbG1lbnQocGF5bG9hZCk7CiAgICB9LAogICAgYXN5bmMgcHJvcGVydHlFbnJvbGxtZW50KHBheWxvYWQpIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCB0cnVlKTsKICAgICAgICBsZXQgY29uZmlnID0gewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiT25lRG9jLVRva2VuIjogb25lRG9jVG9rZW4sCiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgICAgY29uc3QgdmFsaWRhdGVSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgKICAgICAgICAgIGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYXBpL3ZlcmlmeS1lbnJvbGxtZW50Lz9pZD0ke3RoaXMudGRfbm99JnR5cGU9cHJvcGVydHlgLAogICAgICAgICAgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBqd3QgJHt0aGlzLmF1dGhUb2tlbn1gIH0gfQogICAgICAgICk7CiAgICAgICAgaWYgKCF2YWxpZGF0ZVJlc3BvbnNlLmRhdGEuaXNfZXhpc3RpbmcpIHsKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgYGh0dHBzOi8vYXBpLmJhY29vci5nb3YucGgvbGd1YXBpL2AsCiAgICAgICAgICAgIHBheWxvYWQsCiAgICAgICAgICAgIGNvbmZpZwogICAgICAgICAgKTsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLlJlc3BvbnNlLlJlc3VsdC5yZWZlcmVuY2VpZCkgewogICAgICAgICAgICBsZXQgYnVpbGRpbmdfcGF5bG9hZCA9IHsKICAgICAgICAgICAgICBpc19kcmFmdDogZmFsc2UsCiAgICAgICAgICAgICAgaXNfZW5yb2xsZWQ6IHRydWUsCiAgICAgICAgICAgICAgcmVmZXJlbmNlX2lkOiByZXNwb25zZS5kYXRhLlJlc3BvbnNlLlJlc3VsdC5yZWZlcmVuY2VpZCwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goCiAgICAgICAgICAgICAgImFkZEJ1aWxkaW5nQXBwbGljYXRpb24iLAogICAgICAgICAgICAgIGJ1aWxkaW5nX3BheWxvYWQKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImFkZEJ1aWxkaW5nQmFzaWNJbmZvcm1hdGlvbiIsIHsKICAgICAgICAgICAgICBvd25lcl9maXJzdF9uYW1lOiByZXNwb25zZS5kYXRhLlJlc3BvbnNlLlJlc3VsdC5vd25lcl9uYW1lLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImFkZEJ1aWxkaW5nRGV0YWlscyIsIHsKICAgICAgICAgICAgICB0YXhfZGVjX25vOiByZXNwb25zZS5kYXRhLlJlc3BvbnNlLlJlc3VsdC50ZF9udW1iZXIsCiAgICAgICAgICAgICAgcHJvcGVydHlfdHlwZTogdGhpcy5wcm9wZXJ0eV90eXBlLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnRkX25vID0gcmVzcG9uc2UuZGF0YS5SZXNwb25zZS5SZXN1bHQudGRfbnVtYmVyOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICAgICAgdGl0bGU6ICJGYWlsZWQhIiwKICAgICAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLlJlc3BvbnNlLlJlc3VsdC5tZXNzYWdlLAogICAgICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgdGl0bGU6ICJGYWlsZWQhIiwKICAgICAgICAgICAgdGV4dDogIlJlY29yZCBhbHJlYWR5IGVucm9sbGVkLiIsCiAgICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIuZGF0YSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["RealPropertyEnrollment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RealPropertyEnrollment.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <section class=\"sc-rp-enrollment\">\n    <div class=\"container\">\n      <div class=\"flex-column\">\n        <div>\n          <h2>Real Property Enrollment</h2>\n        </div>\n        <enrollment-success\n          v-if=\"isSuccess\"\n          type=\"real_property\"\n          :account_no=\"td_no\"\n        />\n        <div v-if=\"!isSuccess\" class=\"sc-rounded-div\">\n          <div class=\"form-group\">\n            <div class=\"title\">\n              <h3>Account Information</h3>\n            </div>\n            <div>\n              <base-select\n                placeholder=\"------ Choose type of property ------\"\n                :options=\"propertytype\"\n                v-model=\"property_type\"\n                name=\"selectProperty\"\n                class=\"mb15\"\n              />\n              <base-input-icon-end\n                label=\"Tax Declaration Number\"\n                placeholder=\"Enter tax declaration number\"\n                v-model=\"td_no\"\n                name=\"td_no\"\n                refs=\"td_number\"\n                type=\"text\"\n                class=\"mt40\"\n                icon=\"id-card\"\n              />\n            </div>\n            <div>\n              <base-input-icon-end\n                label=\"Official Receipt Number\"\n                placeholder=\"Enter official receipt number\"\n                v-model=\"official_receipt\"\n                name=\"official_receipt\"\n                refs=\"or\"\n                type=\"text\"\n                class=\"mt40\"\n                icon=\"receipt\"\n              />\n            </div>\n            <div class=\"datepicker\">\n              <base-date-picker v-model=\"date\" />\n            </div>\n            <div>\n              <button-block @click.native=\"verify()\">\n                VERIFY\n              </button-block>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport BaseInputIconEnd from \"@/components/forms/BaseInputIconEnd\";\nimport ButtonBlock from \"@/components/ButtonBlock\";\nimport BaseDatePicker from \"@/components/forms/BaseDatePicker\";\nimport EnrollmentSuccess from \"@/components/enrollment/EnrollmentSuccess\";\nimport BaseSelect from \"@/components/forms/BaseSelect\";\nimport axios from \"axios\";\nimport { mapGetters } from \"vuex\";\nconst oneDocToken = process.env.VUE_APP_ONE_DOC_TOKEN;\nexport default {\n  name: \"RealPropertyEnrollment\",\n  components: {\n    BaseInputIconEnd,\n    ButtonBlock,\n    BaseDatePicker,\n    EnrollmentSuccess,\n    BaseSelect,\n  },\n  computed: {\n    ...mapGetters([\"authToken\"]),\n  },\n  mounted() {\n    this.$store.commit(\"setLoading\", false);\n  },\n  data() {\n    return {\n      td_no: \"\",\n      official_receipt: \"\",\n      date: \"\",\n      isSuccess: false,\n      property_type: \"\",\n      required_fields: [\"property_type\", \"td_no\", \"official_receipt\", \"date\"],\n      propertytype: [\n        {\n          label: \"Land\",\n          value: \"Land\",\n        },\n        {\n          label: \"Building\",\n          value: \"Building\",\n        },\n        {\n          label: \"Machinery\",\n          value: \"Machinery\",\n        },\n      ],\n    };\n  },\n  methods: {\n    async verify() {\n      let payload = {\n        name: \"RealPropertyTaxEnrollment\",\n        param: {\n          property_type: this.property_type,\n          tdno: this.td_no,\n          ordate: this.date,\n          ornumber: this.official_receipt,\n        },\n      };\n      await this.propertyEnrollment(payload);\n    },\n    async propertyEnrollment(payload) {\n      try {\n        this.$store.commit(\"setLoading\", true);\n        let config = {\n          headers: {\n            \"OneDoc-Token\": oneDocToken,\n            \"Content-Type\": \"application/json\",\n          },\n        };\n        const validateResponse = await axios.get(\n          `${process.env.VUE_APP_API_URL}/api/verify-enrollment/?id=${this.td_no}&type=property`,\n          { headers: { Authorization: `jwt ${this.authToken}` } }\n        );\n        if (!validateResponse.data.is_existing) {\n          const response = await axios.post(\n            `https://api.bacoor.gov.ph/lguapi/`,\n            payload,\n            config\n          );\n          if (response.data.Response.Result.referenceid) {\n            let building_payload = {\n              is_draft: false,\n              is_enrolled: true,\n              reference_id: response.data.Response.Result.referenceid,\n            };\n            await this.$store.dispatch(\n              \"addBuildingApplication\",\n              building_payload\n            );\n            await this.$store.dispatch(\"addBuildingBasicInformation\", {\n              owner_first_name: response.data.Response.Result.owner_name,\n            });\n            await this.$store.dispatch(\"addBuildingDetails\", {\n              tax_dec_no: response.data.Response.Result.td_number,\n              property_type: this.property_type,\n            });\n            this.isSuccess = true;\n            this.td_no = response.data.Response.Result.td_number;\n          } else {\n            this.$swal({\n              title: \"Failed!\",\n              text: response.data.Response.Result.message,\n              icon: \"error\",\n            });\n          }\n        } else {\n          this.$swal({\n            title: \"Failed!\",\n            text: \"Record already enrolled.\",\n            icon: \"error\",\n          });\n        }\n        this.$store.commit(\"setLoading\", false);\n      } catch (err) {\n        console.log(err.data);\n        this.$store.commit(\"setLoading\", false);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.sc-rp-enrollment {\n  display: flex;\n  flex-wrap: wrap;\n  text-align: center;\n  padding: 70px 30px 50px;\n  min-height: calc(100vh - 285px);\n  .sc-rounded-div {\n    background: #eaf6ff !important;\n    max-width: 53%;\n    width: 100%;\n    min-height: 500px;\n    margin: 50px auto 0;\n    box-shadow: 0px 10px 20px #0000000d;\n    .form-group {\n      text-align: center;\n      padding: 80px 80px 50px;\n      .title {\n        margin-bottom: 50px;\n        text-align: left;\n      }\n      div {\n        margin-bottom: 30px;\n      }\n    }\n  }\n}\n.datepicker {\n  width: 100%;\n}\n\n/*\nMOBILE RESPONSIVENESS \n--------------------------------------------------------------*/\n@media only screen and (max-width: 1400px) {\n  .sc-rp-enrollment {\n    .sc-rounded-div {\n      max-width: 570px;\n      min-height: auto;\n      margin-top: 30px;\n      .form-group {\n        padding: 60px 60px 30px;\n        .title {\n          margin-bottom: 30px;\n        }\n        div {\n          margin-bottom: 20px;\n        }\n      }\n    }\n  }\n}\n\n@media only screen and (max-width: 768px) {\n  h2 {\n    font-size: 20px;\n  }\n\n  .sc-rp-enrollment .sc-rounded-div .form-group {\n    padding: 50px 30px 30px;\n  }\n\n  h3 {\n    font-size: 17px;\n  }\n}\n\n@media only screen and (max-width: 580px) {\n  h2 {\n    font-size: 20px;\n  }\n}\n\n@media only screen and (max-width: 480px) {\n  .sc-rp-enrollment {\n    padding: 70px 0 30px;\n  }\n}\n\n@media only screen and (max-width: 480px) {\n  .sc-rp-enrollment .sc-rounded-div .form-group {\n    padding: 30px 15px 10px;\n  }\n\n  h3 {\n    font-size: 15px;\n  }\n}\n</style>\n"]}]}