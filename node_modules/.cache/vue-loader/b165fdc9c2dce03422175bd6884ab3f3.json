{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/pages/BusinessPermitEnrollment.vue?vue&type=style&index=0&id=1cf1c683&lang=scss&scoped=true&","dependencies":[{"path":"/var/www/html/boss-web/src/pages/BusinessPermitEnrollment.vue","mtime":1612455150458},{"path":"/var/www/html/boss-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnNjLWJzLWVucm9sbG1lbnQgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC13cmFwOiB3cmFwOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiA3MHB4IDMwcHggNTBweDsKICBtaW4taGVpZ2h0OiBjYWxjKDEwMHZoIC0gMjg1cHgpOwogIC5zYy1yb3VuZGVkLWRpdiB7CiAgICBiYWNrZ3JvdW5kOiAjZWFmNmZmICFpbXBvcnRhbnQ7CiAgICBtYXgtd2lkdGg6IDUzJTsKICAgIHdpZHRoOiAxMDAlOwogICAgbWluLWhlaWdodDogNTAwcHg7CiAgICBtYXJnaW46IDUwcHggYXV0byAwOwogICAgYm94LXNoYWRvdzogMHB4IDEwcHggMjBweCAjMDAwMDAwMGQ7CiAgICAuZm9ybS1ncm91cCB7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgcGFkZGluZzogODBweCA4MHB4IDUwcHg7CiAgICAgIC50aXRsZSB7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogNTBweDsKICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICB9CiAgICAgIGRpdiB7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgfQogICAgfQogIH0KfQoKLyoKTU9CSUxFIFJFU1BPTlNJVkVORVNTIAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTQwMHB4KSB7CiAgLnNjLWJzLWVucm9sbG1lbnQgewogICAgLnNjLXJvdW5kZWQtZGl2IHsKICAgICAgbWF4LXdpZHRoOiA1NzBweDsKICAgICAgbWluLWhlaWdodDogYXV0bzsKICAgICAgbWFyZ2luLXRvcDogMzBweDsKICAgICAgLmZvcm0tZ3JvdXAgewogICAgICAgIHBhZGRpbmc6IDYwcHggNjBweCAzMHB4OwogICAgICAgIC50aXRsZSB7CiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgICAgIH0KICAgICAgICBkaXYgewogICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0KCkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY4cHgpIHsKICBoMiB7CiAgICBmb250LXNpemU6IDIwcHg7CiAgfQoKICAuc2MtYnMtZW5yb2xsbWVudCAuc2Mtcm91bmRlZC1kaXYgLmZvcm0tZ3JvdXAgewogICAgcGFkZGluZzogNTBweCAzMHB4IDMwcHg7CiAgfQoKICBoMyB7CiAgICBmb250LXNpemU6IDE3cHg7CiAgfQp9CgpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDU4MHB4KSB7CiAgaDIgewogICAgZm9udC1zaXplOiAyMHB4OwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0ODBweCkgewogIC5zYy1icy1lbnJvbGxtZW50IHsKICAgIHBhZGRpbmc6IDcwcHggMCAzMHB4OwogIH0KfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0ODBweCkgewogIC5zYy1icy1lbnJvbGxtZW50IC5zYy1yb3VuZGVkLWRpdiAuZm9ybS1ncm91cCB7CiAgICBwYWRkaW5nOiAzMHB4IDE1cHggMTBweDsKICB9CgogIGgzIHsKICAgIGZvbnQtc2l6ZTogMTVweDsKICB9Cn0K"},{"version":3,"sources":["BusinessPermitEnrollment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"BusinessPermitEnrollment.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <section class=\"sc-bs-enrollment\">\n    <div class=\"container\">\n      <div class=\"flex-column\">\n        <div>\n          <h2>Business Permit Enrollment</h2>\n        </div>\n        <enrollment-success\n          v-if=\"isSuccess\"\n          type=\"business_permit\"\n          :account_no=\"account_no\"\n        />\n        <div v-if=\"!isSuccess\" class=\"sc-rounded-div\">\n          <div class=\"form-group\">\n            <div class=\"title\">\n              <h3>Account Information</h3>\n            </div>\n            <div>\n              <base-input-icon-end\n                label=\"Account Number\"\n                placeholder=\"Enter account number\"\n                v-model=\"account_no\"\n                name=\"account_no\"\n                refs=\"account_number\"\n                type=\"text\"\n                class=\"mt40\"\n                icon=\"id-card\"\n              />\n            </div>\n            <div>\n              <base-input-icon-end\n                label=\"Latest Official Receipt Number\"\n                placeholder=\"Enter official receipt number\"\n                v-model=\"official_receipt\"\n                name=\"official_receipt\"\n                refs=\"or\"\n                type=\"text\"\n                class=\"mt40\"\n                icon=\"receipt\"\n              />\n            </div>\n            <div>\n              <base-date-picker\n                v-model=\"date\"\n                placeholder=\"Latest Official Receipt Date\"\n              />\n            </div>\n            <div>\n              <button-block @click.native=\"verify()\"> VERIFY </button-block>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport BaseInputIconEnd from \"@/components/forms/BaseInputIconEnd\";\nimport ButtonBlock from \"@/components/ButtonBlock\";\nimport EnrollmentSuccess from \"@/components/enrollment/EnrollmentSuccess\";\nimport BaseDatePicker from \"@/components/forms/BaseDatePicker\";\nimport { mapGetters } from \"vuex\";\nimport axios from \"axios\";\nconst oneDocToken = process.env.VUE_APP_ONE_DOC_TOKEN;\nconst lguLocalEndpoint = process.env.VUE_APP_LGU_LOCAL_ENDPOINT;\nexport default {\n  name: \"BusinessPermitEnrollment\",\n  components: {\n    BaseInputIconEnd,\n    ButtonBlock,\n    EnrollmentSuccess,\n    BaseDatePicker,\n  },\n  data() {\n    return {\n      account_no: \"\",\n      official_receipt: \"\",\n      date: \"\",\n      isSuccess: false,\n    };\n  },\n  computed: {\n    ...mapGetters([\"isBusinessEnrollmentSuccess\", \"authToken\"]),\n  },\n  methods: {\n    async verify() {\n      this.$store.commit(\"setLoading\", true);\n      let payload = {\n        name: \"BusinessPermitEnrollment\",\n        param: {\n          accountno: this.account_no,\n          ordate: this.date,\n          ornumber: this.official_receipt,\n        },\n      };\n      await this.businessEnrollment(payload);\n      this.$store.commit(\"setLoading\", false);\n    },\n    async businessEnrollment(payload) {\n      try {\n        let config = {\n          headers: {\n            \"OneDoc-Token\": oneDocToken,\n            \"Content-Type\": \"application/json\",\n          },\n        };\n\n        const validateResponse = await axios.get(\n          `${process.env.VUE_APP_API_URL}/api/verify-enrollment/?id=${this.account_no}&type=business`,\n          { headers: { Authorization: `jwt ${this.authToken}` } }\n        );\n\n        if (!validateResponse.data.is_existing) {\n          const response = await axios.post(\n            `${lguLocalEndpoint}`,\n            payload,\n            config\n          );\n          if (response.data.Status === \"Success\") {\n            if (response.data.Result.businessid) {\n              await this.$store.dispatch(\"addBusinessApplication\", {\n                account_number: this.account_no,\n                is_draft: false,\n                is_enrolled: true,\n              });\n              await this.$store.dispatch(\"addBusinessBasicInformation\", {});\n              await this.$store.dispatch(\"addBusinessDetails\", {\n                name: response.data.Result.businessname,\n              });\n              this.isSuccess = true;\n              this.account_no = response.data.Result.account_number;\n            } else {\n              this.$swal({\n                title: \"Failed!\",\n                text: response.data.Message,\n                icon: \"error\",\n              });\n            }\n          } else {\n            this.$swal({\n              title: \"Failed!\",\n              text: `${response.data.Message}`,\n              icon: \"error\",\n            });\n          }\n        } else {\n          this.$swal({\n            title: \"Failed!\",\n            text: \"Record already enrolled.\",\n            icon: \"error\",\n          });\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.sc-bs-enrollment {\n  display: flex;\n  flex-wrap: wrap;\n  text-align: center;\n  padding: 70px 30px 50px;\n  min-height: calc(100vh - 285px);\n  .sc-rounded-div {\n    background: #eaf6ff !important;\n    max-width: 53%;\n    width: 100%;\n    min-height: 500px;\n    margin: 50px auto 0;\n    box-shadow: 0px 10px 20px #0000000d;\n    .form-group {\n      text-align: center;\n      padding: 80px 80px 50px;\n      .title {\n        margin-bottom: 50px;\n        text-align: left;\n      }\n      div {\n        margin-bottom: 30px;\n      }\n    }\n  }\n}\n\n/*\nMOBILE RESPONSIVENESS \n--------------------------------------------------------------*/\n@media only screen and (max-width: 1400px) {\n  .sc-bs-enrollment {\n    .sc-rounded-div {\n      max-width: 570px;\n      min-height: auto;\n      margin-top: 30px;\n      .form-group {\n        padding: 60px 60px 30px;\n        .title {\n          margin-bottom: 30px;\n        }\n        div {\n          margin-bottom: 20px;\n        }\n      }\n    }\n  }\n}\n\n@media only screen and (max-width: 768px) {\n  h2 {\n    font-size: 20px;\n  }\n\n  .sc-bs-enrollment .sc-rounded-div .form-group {\n    padding: 50px 30px 30px;\n  }\n\n  h3 {\n    font-size: 17px;\n  }\n}\n\n@media only screen and (max-width: 580px) {\n  h2 {\n    font-size: 20px;\n  }\n}\n\n@media only screen and (max-width: 480px) {\n  .sc-bs-enrollment {\n    padding: 70px 0 30px;\n  }\n}\n\n@media only screen and (max-width: 480px) {\n  .sc-bs-enrollment .sc-rounded-div .form-group {\n    padding: 30px 15px 10px;\n  }\n\n  h3 {\n    font-size: 15px;\n  }\n}\n</style>\n"]}]}