{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/components/forms/AppointmentForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/boss-web/src/components/forms/AppointmentForm.vue","mtime":1606242937935},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCdXR0b25CbG9jayBmcm9tICJAL2NvbXBvbmVudHMvQnV0dG9uQmxvY2siOwppbXBvcnQgQmFzZVNlbGVjdCBmcm9tICJAL2NvbXBvbmVudHMvZm9ybXMvQmFzZVNlbGVjdCI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcHBvaW50bWVudEZvcm0iLAogIGNvbXBvbmVudHM6IHsKICAgIEJhc2VTZWxlY3QsCiAgICBCdXR0b25CbG9jaywKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgImN1cnJlbnREYXRlIiwKICAgICAgImlzQXBwb2ludG1lbnRTdWNjZXNzIiwKICAgICAgImFwcG9pbnRtZW50RXJyb3IiLAogICAgICAiY3VycmVudFNvYSIsCiAgICAgICJjdXJyZW50QXBwb2ludG1lbnQiLAogICAgICAiYXBwb2ludG1lbnRBY3Rpb24iLAogICAgICAiY3VycmVudFNvYU9iaiIsCiAgICBdKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcHBvaW50bWVudFR5cGU6ICIiLAogICAgICBiYXRjaDogIiIsCiAgICAgIGFwcG9pbnRtZW50VHlwZU9wdGlvbnM6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIkJ1aWxkaW5nIFBlcm1pdCBQYXltZW50IiwKICAgICAgICAgIHZhbHVlOiAiQnVpbGRpbmcgUGVybWl0IFBheW1lbnQiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJCdXNpbmVzcyBQZXJtaXQgUGF5bWVudCIsCiAgICAgICAgICB2YWx1ZTogIkJ1c2luZXNzIFBlcm1pdCBQYXltZW50IiwKICAgICAgICB9LAogICAgICBdLAoKICAgICAgYmF0Y2hPcHRpb25zOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJCYXRjaCAxICggODowMCBBTSAtIDE6MDAgUE0gKSIsCiAgICAgICAgICB2YWx1ZTogImJhdGNoXzEiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJCYXRjaCAyICggMTowMCBQTSAtIDU6MDAgUE0gKSIsCiAgICAgICAgICB2YWx1ZTogImJhdGNoXzIiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgc2V0QXBwb2ludG1lbnQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJjdXJyZW50IHNvYSB0eXBlIiwgdGhpcy5jdXJyZW50U29hT2JqKTsKICAgICAgbGV0IHRpdGxlID0KICAgICAgICB0aGlzLmN1cnJlbnRTb2FPYmouYXBwbGljYXRpb25fdHlwZSA9PT0gImJ1c2luZXNzIgogICAgICAgICAgPyAiQnVzaW5lc3MgUGVybWl0IFBheW1lbnQiCiAgICAgICAgICA6IHRoaXMuY3VycmVudFNvYU9iai5hcHBsaWNhdGlvbl90eXBlID09PSAiYnVpbGRpbmciCiAgICAgICAgICA/ICJCdWlsZGluZyBQZXJtaXQgUGF5bWVudCIKICAgICAgICAgIDogIlJlYWwgUHJvcGVydHkgUGF5bWVudCI7CiAgICAgIGxldCBwYXlsb2FkID0gewogICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICBiYXRjaDogdGhpcy5iYXRjaCwKICAgICAgICBhcHBvaW50bWVudF9kYXRlOiB0aGlzLmN1cnJlbnREYXRlLAogICAgICAgIHNvYTogdGhpcy5jdXJyZW50U29hT2JqLmlkLAogICAgICB9OwogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCB0cnVlKTsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImFkZEFwcG9pbnRtZW50IiwgcGF5bG9hZCk7CiAgICAgIGlmICh0aGlzLmlzQXBwb2ludG1lbnRTdWNjZXNzKSB7CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwogICAgICAgIHRoaXMuJG1vZGFsLmhpZGUoImFwcG9pbnRtZW50TW9kYWwiKTsKICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgIHRpdGxlOiAiU3VjY2VzcyEiLAogICAgICAgICAgdGV4dDogIkFwcG9pbnRtZW50IHdhcyBzdWJtaXR0ZWQgc3VjY2Vzc2Z1bGx5LiIsCiAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiQXBwb2ludG1lbnRTbGlwIiB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCBmYWxzZSk7CiAgICAgICAgdGhpcy4kbW9kYWwuaGlkZSgiYXBwb2ludG1lbnRNb2RhbCIpOwogICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgdGl0bGU6ICJGYWlsZWQhIiwKICAgICAgICAgIHRleHQ6IHRoaXMuYXBwb2ludG1lbnRFcnJvciwKICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyB1cGRhdGVBcHBvaW50bWVudCgpIHsKICAgICAgbGV0IHBheWxvYWQgPSB0aGlzLmN1cnJlbnRBcHBvaW50bWVudDsKICAgICAgcGF5bG9hZC5vbGRfYXBwb2ludG1lbnRfZGF0ZSA9IHRoaXMuY3VycmVudEFwcG9pbnRtZW50LmFwcG9pbnRtZW50X2RhdGU7CiAgICAgIHBheWxvYWQuYXBwb2ludG1lbnRfZGF0ZSA9IHRoaXMuY3VycmVudERhdGU7CiAgICAgIHBheWxvYWQuYmF0Y2ggPSB0aGlzLmJhdGNoOwogICAgICBwYXlsb2FkLm9sZF9iYXRjaCA9IHRoaXMuY3VycmVudEFwcG9pbnRtZW50LmJhdGNoOwogICAgICBwYXlsb2FkLnNvYSA9IHRoaXMuY3VycmVudFNvYU9iai5pZDsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgdHJ1ZSk7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1cGRhdGVBcHBvaW50bWVudCIsIHBheWxvYWQpOwogICAgICBpZiAodGhpcy5pc0FwcG9pbnRtZW50U3VjY2VzcykgewogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TG9hZGluZyIsIGZhbHNlKTsKICAgICAgICB0aGlzLiRtb2RhbC5oaWRlKCJhcHBvaW50bWVudE1vZGFsIik7CiAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICB0aXRsZTogIlN1Y2Nlc3MhIiwKICAgICAgICAgIHRleHQ6ICJBcHBvaW50bWVudCB3YXMgcmVzY2hlZHVsZWQgc3VjY2Vzc2Z1bGx5LiIsCiAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiQXBwb2ludG1lbnRTbGlwIiB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCBmYWxzZSk7CiAgICAgICAgdGhpcy4kbW9kYWwuaGlkZSgiYXBwb2ludG1lbnRNb2RhbCIpOwogICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgdGl0bGU6ICJGYWlsZWQhIiwKICAgICAgICAgIHRleHQ6IHRoaXMuYXBwb2ludG1lbnRFcnJvciwKICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["AppointmentForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppointmentForm.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n  <div class=\"container form-section\">\n    <div class=\"flex-column\">\n      <!-- <div class=\"meta-input-label mt10 mb10\">\n        Appointment Type:\n      </div> -->\n      <!-- <base-select\n        placeholder=\"--- Select from the options ---\"\n        :options=\"appointmentTypeOptions\"\n        v-model=\"appointmentType\"\n        name=\"selectOptions\"\n        class=\"mb15\"\n      /> -->\n      <div class=\"meta-input-label mt10 mb10\">\n        Batch:\n      </div>\n      <base-select\n        placeholder=\"--- Select from the options ---\"\n        :options=\"batchOptions\"\n        v-model=\"batch\"\n        name=\"selectOptions\"\n        class=\"mb15\"\n      />\n      <button-block\n        @click.native=\"setAppointment()\"\n        v-if=\"appointmentAction === 'add'\"\n        >Submit</button-block\n      >\n      <button-block\n        @click.native=\"updateAppointment()\"\n        v-if=\"appointmentAction === 'update'\"\n        >Submit</button-block\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport ButtonBlock from \"@/components/ButtonBlock\";\nimport BaseSelect from \"@/components/forms/BaseSelect\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"AppointmentForm\",\n  components: {\n    BaseSelect,\n    ButtonBlock,\n  },\n  computed: {\n    ...mapGetters([\n      \"currentDate\",\n      \"isAppointmentSuccess\",\n      \"appointmentError\",\n      \"currentSoa\",\n      \"currentAppointment\",\n      \"appointmentAction\",\n      \"currentSoaObj\",\n    ]),\n  },\n  data() {\n    return {\n      appointmentType: \"\",\n      batch: \"\",\n      appointmentTypeOptions: [\n        {\n          label: \"Building Permit Payment\",\n          value: \"Building Permit Payment\",\n        },\n        {\n          label: \"Business Permit Payment\",\n          value: \"Business Permit Payment\",\n        },\n      ],\n\n      batchOptions: [\n        {\n          label: \"Batch 1 ( 8:00 AM - 1:00 PM )\",\n          value: \"batch_1\",\n        },\n        {\n          label: \"Batch 2 ( 1:00 PM - 5:00 PM )\",\n          value: \"batch_2\",\n        },\n      ],\n    };\n  },\n  methods: {\n    async setAppointment() {\n      console.log(\"current soa type\", this.currentSoaObj);\n      let title =\n        this.currentSoaObj.application_type === \"business\"\n          ? \"Business Permit Payment\"\n          : this.currentSoaObj.application_type === \"building\"\n          ? \"Building Permit Payment\"\n          : \"Real Property Payment\";\n      let payload = {\n        title: title,\n        batch: this.batch,\n        appointment_date: this.currentDate,\n        soa: this.currentSoaObj.id,\n      };\n      await this.$store.commit(\"setLoading\", true);\n      await this.$store.dispatch(\"addAppointment\", payload);\n      if (this.isAppointmentSuccess) {\n        await this.$store.commit(\"setLoading\", false);\n        this.$modal.hide(\"appointmentModal\");\n        this.$swal({\n          title: \"Success!\",\n          text: \"Appointment was submitted successfully.\",\n          icon: \"success\",\n        });\n        this.$router.push({ name: \"AppointmentSlip\" });\n      } else {\n        await this.$store.commit(\"setLoading\", false);\n        this.$modal.hide(\"appointmentModal\");\n        this.$swal({\n          title: \"Failed!\",\n          text: this.appointmentError,\n          icon: \"error\",\n        });\n      }\n    },\n    async updateAppointment() {\n      let payload = this.currentAppointment;\n      payload.old_appointment_date = this.currentAppointment.appointment_date;\n      payload.appointment_date = this.currentDate;\n      payload.batch = this.batch;\n      payload.old_batch = this.currentAppointment.batch;\n      payload.soa = this.currentSoaObj.id;\n      await this.$store.commit(\"setLoading\", true);\n      await this.$store.dispatch(\"updateAppointment\", payload);\n      if (this.isAppointmentSuccess) {\n        await this.$store.commit(\"setLoading\", false);\n        this.$modal.hide(\"appointmentModal\");\n        this.$swal({\n          title: \"Success!\",\n          text: \"Appointment was rescheduled successfully.\",\n          icon: \"success\",\n        });\n        this.$router.push({ name: \"AppointmentSlip\" });\n      } else {\n        await this.$store.commit(\"setLoading\", false);\n        this.$modal.hide(\"appointmentModal\");\n        this.$swal({\n          title: \"Failed!\",\n          text: this.appointmentError,\n          icon: \"error\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.form-section {\n  padding: 15px;\n}\n</style>\n"]}]}