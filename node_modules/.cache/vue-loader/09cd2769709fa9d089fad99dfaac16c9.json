{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/components/forms/AppointmentForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/boss-web/src/components/forms/AppointmentForm.vue","mtime":1605179000987},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCdXR0b25CbG9jayBmcm9tICJAL2NvbXBvbmVudHMvQnV0dG9uQmxvY2siOwppbXBvcnQgQmFzZVNlbGVjdCBmcm9tICJAL2NvbXBvbmVudHMvZm9ybXMvQmFzZVNlbGVjdCI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwcG9pbnRtZW50Rm9ybSIsCiAgY29tcG9uZW50czogewogICAgQmFzZVNlbGVjdCwKICAgIEJ1dHRvbkJsb2NrCiAgfSwKICBjb21wdXRlZDp7CiAgICAuLi5tYXBHZXR0ZXJzKFsnY3VycmVudERhdGUnLCAnaXNBcHBvaW50bWVudFN1Y2Nlc3MnLCAnYXBwb2ludG1lbnRFcnJvcicsICdjdXJyZW50U29hJywgJ2N1cnJlbnRBcHBvaW50bWVudCcsICdhcHBvaW50bWVudEFjdGlvbicsICdjdXJyZW50U29hT2JqJ10pCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXBwb2ludG1lbnRUeXBlOiAiIiwKICAgICAgYmF0Y2g6ICIiLAogICAgICBhcHBvaW50bWVudFR5cGVPcHRpb25zOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJCdWlsZGluZyBQZXJtaXQgUGF5bWVudCIsCiAgICAgICAgICB2YWx1ZTogIkJ1aWxkaW5nIFBlcm1pdCBQYXltZW50IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAiQnVzaW5lc3MgUGVybWl0IFBheW1lbnQiLAogICAgICAgICAgdmFsdWU6ICJCdXNpbmVzcyBQZXJtaXQgUGF5bWVudCIsCiAgICAgICAgfSwKICAgICAgXSwKCiAgICAgIGJhdGNoT3B0aW9uczogWwogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAiQmF0Y2ggMSAoIDg6MDAgQU0gLSAxOjAwIFBNICkiLAogICAgICAgICAgdmFsdWU6ICJiYXRjaF8xIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAiQmF0Y2ggMiAoIDE6MDAgUE0gLSA1OjAwIFBNICkiLAogICAgICAgICAgdmFsdWU6ICJiYXRjaF8yIiwKICAgICAgICB9LAogICAgICBdLAogICAgfTsKICB9LAogIG1ldGhvZHM6ewogICAgYXN5bmMgc2V0QXBwb2ludG1lbnQoKXsKICAgICAgbGV0IHRpdGxlID0gdGhpcy5jdXJyZW50U29hLnR5cGUgPT09ICdidXNpbmVzcycgPyAnQnVzaW5lc3MgUGVybWl0IFBheW1lbnQnIDogdGhpcy5jdXJyZW50U29hLnR5cGUgPT09ICdidWlsZGluZycgPyAnQnVpbGRpbmcgUGVybWl0IFBheW1lbnQnIDogJ1JlYWwgUHJvcGVydHkgUGF5bWVudCcgCiAgICAgIAogICAgICBsZXQgcGF5bG9hZCA9IHt0aXRsZTogdGl0bGUsIGJhdGNoOiB0aGlzLmJhdGNoLCBhcHBvaW50bWVudF9kYXRlOiB0aGlzLmN1cnJlbnREYXRlLCBzb2E6IHRoaXMuY3VycmVudFNvYS5pZH0KICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgdHJ1ZSk7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhZGRBcHBvaW50bWVudCcsIHBheWxvYWQpCiAgICAgIGlmKHRoaXMuaXNBcHBvaW50bWVudFN1Y2Nlc3MpewogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TG9hZGluZyIsIGZhbHNlKTsKICAgICAgICB0aGlzLiRtb2RhbC5oaWRlKCJhcHBvaW50bWVudE1vZGFsIik7CiAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICAgIHRpdGxlOiAnU3VjY2VzcyEnLAogICAgICAgICAgICB0ZXh0OiAnQXBwb2ludG1lbnQgd2FzIHN1Ym1pdHRlZCBzdWNjZXNzZnVsbHkuJywKICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnCiAgICAgICAgfSkKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTonQXBwb2ludG1lbnRTbGlwJ30pCiAgICAgIH1lbHNlewogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TG9hZGluZyIsIGZhbHNlKTsKICAgICAgIHRoaXMuJG1vZGFsLmhpZGUoImFwcG9pbnRtZW50TW9kYWwiKTsKICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgICB0aXRsZTogJ0ZhaWxlZCEnLAogICAgICAgICAgICB0ZXh0OiB0aGlzLmFwcG9pbnRtZW50RXJyb3IsCiAgICAgICAgICAgIGljb246ICdlcnJvcicKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICBhc3luYyB1cGRhdGVBcHBvaW50bWVudCgpewoKICAgICAgbGV0IHBheWxvYWQgPSB0aGlzLmN1cnJlbnRBcHBvaW50bWVudAogICAgICBwYXlsb2FkLm9sZF9hcHBvaW50bWVudF9kYXRlID0gdGhpcy5jdXJyZW50QXBwb2ludG1lbnQuYXBwb2ludG1lbnRfZGF0ZQogICAgICBwYXlsb2FkLmFwcG9pbnRtZW50X2RhdGUgPSB0aGlzLmN1cnJlbnREYXRlCiAgICAgIHBheWxvYWQuYmF0Y2ggPSB0aGlzLmJhdGNoCiAgICAgIHBheWxvYWQub2xkX2JhdGNoID0gdGhpcy5jdXJyZW50QXBwb2ludG1lbnQuYmF0Y2gKICAgICAgcGF5bG9hZC5zb2EgPSB0aGlzLmN1cnJlbnRTb2FPYmouaWQKICAgICAgY29uc29sZS5sb2coJ3BheWxvYWQnLCBwYXlsb2FkKQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCB0cnVlKTsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZUFwcG9pbnRtZW50JywgcGF5bG9hZCkKICAgICAgaWYodGhpcy5pc0FwcG9pbnRtZW50U3VjY2Vzcyl7CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwogICAgICAgIHRoaXMuJG1vZGFsLmhpZGUoImFwcG9pbnRtZW50TW9kYWwiKTsKICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgdGl0bGU6ICdTdWNjZXNzIScsCiAgICAgICAgICAgIHRleHQ6ICdBcHBvaW50bWVudCB3YXMgcmVzY2hlZHVsZWQgc3VjY2Vzc2Z1bGx5LicsCiAgICAgICAgICAgIGljb246ICdzdWNjZXNzJwogICAgICAgIH0pCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6J0FwcG9pbnRtZW50U2xpcCd9KQogICAgICB9ZWxzZXsKICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCBmYWxzZSk7CiAgICAgICB0aGlzLiRtb2RhbC5oaWRlKCJhcHBvaW50bWVudE1vZGFsIik7CiAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgdGl0bGU6ICdGYWlsZWQhJywKICAgICAgICAgICAgdGV4dDogdGhpcy5hcHBvaW50bWVudEVycm9yLAogICAgICAgICAgICBpY29uOiAnZXJyb3InCiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["AppointmentForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppointmentForm.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n  <div class=\"container form-section\">\n    <div class=\"flex-column\">\n      <!-- <div class=\"meta-input-label mt10 mb10\">\n        Appointment Type:\n      </div> -->\n      <!-- <base-select\n        placeholder=\"--- Select from the options ---\"\n        :options=\"appointmentTypeOptions\"\n        v-model=\"appointmentType\"\n        name=\"selectOptions\"\n        class=\"mb15\"\n      /> -->\n      <div class=\"meta-input-label mt10 mb10\">\n        Batch:\n      </div>\n      <base-select\n        placeholder=\"--- Select from the options ---\"\n        :options=\"batchOptions\"\n        v-model=\"batch\"\n        name=\"selectOptions\"\n        class=\"mb15\"\n      />\n       <button-block @click.native=\"setAppointment()\"\n       v-if=\"appointmentAction === 'add'\"\n        >Submit</button-block\n      >\n      <button-block @click.native=\"updateAppointment()\"\n       v-if=\"appointmentAction === 'update'\"\n        >Submit</button-block\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport ButtonBlock from \"@/components/ButtonBlock\";\nimport BaseSelect from \"@/components/forms/BaseSelect\";\nimport { mapGetters } from \"vuex\"\nexport default {\n  name: \"AppointmentForm\",\n  components: {\n    BaseSelect,\n    ButtonBlock\n  },\n  computed:{\n    ...mapGetters(['currentDate', 'isAppointmentSuccess', 'appointmentError', 'currentSoa', 'currentAppointment', 'appointmentAction', 'currentSoaObj'])\n  },\n  data() {\n    return {\n      appointmentType: \"\",\n      batch: \"\",\n      appointmentTypeOptions: [\n        {\n          label: \"Building Permit Payment\",\n          value: \"Building Permit Payment\",\n        },\n        {\n          label: \"Business Permit Payment\",\n          value: \"Business Permit Payment\",\n        },\n      ],\n\n      batchOptions: [\n        {\n          label: \"Batch 1 ( 8:00 AM - 1:00 PM )\",\n          value: \"batch_1\",\n        },\n        {\n          label: \"Batch 2 ( 1:00 PM - 5:00 PM )\",\n          value: \"batch_2\",\n        },\n      ],\n    };\n  },\n  methods:{\n    async setAppointment(){\n      let title = this.currentSoa.type === 'business' ? 'Business Permit Payment' : this.currentSoa.type === 'building' ? 'Building Permit Payment' : 'Real Property Payment' \n      \n      let payload = {title: title, batch: this.batch, appointment_date: this.currentDate, soa: this.currentSoa.id}\n      await this.$store.commit(\"setLoading\", true);\n      await this.$store.dispatch('addAppointment', payload)\n      if(this.isAppointmentSuccess){\n        await this.$store.commit(\"setLoading\", false);\n        this.$modal.hide(\"appointmentModal\");\n        this.$swal({\n            title: 'Success!',\n            text: 'Appointment was submitted successfully.',\n            icon: 'success'\n        })\n        this.$router.push({name:'AppointmentSlip'})\n      }else{\n        await this.$store.commit(\"setLoading\", false);\n       this.$modal.hide(\"appointmentModal\");\n       this.$swal({\n            title: 'Failed!',\n            text: this.appointmentError,\n            icon: 'error'\n        })\n      }\n    },\n   async updateAppointment(){\n\n      let payload = this.currentAppointment\n      payload.old_appointment_date = this.currentAppointment.appointment_date\n      payload.appointment_date = this.currentDate\n      payload.batch = this.batch\n      payload.old_batch = this.currentAppointment.batch\n      payload.soa = this.currentSoaObj.id\n      console.log('payload', payload)\n      await this.$store.commit(\"setLoading\", true);\n      await this.$store.dispatch('updateAppointment', payload)\n      if(this.isAppointmentSuccess){\n        await this.$store.commit(\"setLoading\", false);\n        this.$modal.hide(\"appointmentModal\");\n        this.$swal({\n            title: 'Success!',\n            text: 'Appointment was rescheduled successfully.',\n            icon: 'success'\n        })\n        this.$router.push({name:'AppointmentSlip'})\n      }else{\n        await this.$store.commit(\"setLoading\", false);\n       this.$modal.hide(\"appointmentModal\");\n       this.$swal({\n            title: 'Failed!',\n            text: this.appointmentError,\n            icon: 'error'\n        })\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.form-section{\n  padding: 15px;\n}\n</style>\n"]}]}