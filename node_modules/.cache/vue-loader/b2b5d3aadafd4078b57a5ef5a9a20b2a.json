{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/components/forms/BaseFileUploader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/boss-web/src/components/forms/BaseFileUploader.vue","mtime":1634053588276},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IFNUQVRVU19JTklUSUFMID0gMCwKICBTVEFUVVNfU0FWSU5HID0gMSwKICBTVEFUVVNfU1VDQ0VTUyA9IDIsCiAgU1RBVFVTX0ZBSUxFRCA9IDM7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJCYXNlRmlsZVVwbG9hZGVyIiwKICBwcm9wczogewogICAgdXBsb2FkVHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJpbWFnZS8qLCBhcHBsaWNhdGlvbi9wZGYiLAogICAgfSwKICAgIGhhc0Vycm9yOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICB9LAogICAgbGFiZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIiwKICAgIH0sCiAgICBkZXNjcmlwdGlvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiLAogICAgfSwKICAgIHByb3BlcnRpZXM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfSwKICAgIH0sCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogICAgZmlsZUxhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogICAgaXNFdmFsdWF0aW9uOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIGlzUGF5bWVudERldGFpbHM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgbmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJmaWxlIiwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFN0YXR1czogbnVsbCwKICAgICAgZmlsZW5hbWU6ICIiLAogICAgICBjb25uZWN0aW9uOiBudWxsLAogICAgICB2YWxpZEltYWdlVHlwZXM6IFsiaW1hZ2UvZ2lmIiwgImltYWdlL2pwZWciLCAiaW1hZ2UvcG5nIl0sCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TG9hZGluZyIsIGZhbHNlKTsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0Q2xlYXJGaWxlSW5wdXQiLCBmYWxzZSk7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldElzRmlsZVJlYWR5IiwgZmFsc2UpOwogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRDdXJyZW50RXZhbHVhdGlvbkZpbGUiLCBuZXcgRm9ybURhdGEoKSk7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldElzRmlsZVVwbG9hZEZhaWxlZCIsIGZhbHNlKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgImFwcGxpY2F0aW9uUmVxdWlyZW1lbnRzIiwKICAgICAgImlzVXBsb2FkaW5nIiwKICAgICAgImJ1aWxkaW5nQXBwbGljYXRpb25SZXF1aXJlbWVudHMiLAogICAgICAiY3VycmVudEV2YWx1YXRpb25GaWxlIiwKICAgICAgImlzVXBsb2FkU3VjY2VzcyIsCiAgICAgICJpc0ZpbGVVcGxvYWRGYWlsZWQiLAogICAgICAicGF5bWVudERldGFpbHMiLAogICAgICAiY2xlYXJGaWxlSW5wdXQiLAogICAgICAiYnVzaW5lc3NBcHBsaWNhdGlvbiIsCiAgICBdKSwKICAgIGlzSW5pdGlhbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXR1cyA9PT0gU1RBVFVTX0lOSVRJQUw7CiAgICB9LAogICAgaXNTYXZpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0dXMgPT09IFNUQVRVU19TQVZJTkc7CiAgICB9LAogICAgaXNTdWNjZXNzKCkgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50U3RhdHVzID09PSBTVEFUVVNfU1VDQ0VTUzsKICAgIH0sCiAgICBpc0ZhaWxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXR1cyA9PT0gU1RBVFVTX0ZBSUxFRDsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgY2xlYXJGaWxlSW5wdXQ6IHsKICAgICAgaGFuZGxlcihuZXdWYWwpIHsKICAgICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgICB0aGlzLmNsZWFySW5wdXQoKTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0Q2xlYXJGaWxlSW5wdXQiLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHNhdmUoZm9ybURhdGEpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRJc0ZpbGVSZWFkeSIsIHRydWUpOwogICAgICBpZiAoIXRoaXMuaXNFdmFsdWF0aW9uKSB7CiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gImJ1c2luZXNzIikgewogICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVwbG9hZFJlcXVpcmVtZW50cyIsIGZvcm1EYXRhKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gInByb3BlcnR5IikgewogICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVwbG9hZEJ1aWxkaW5nUmVxdWlyZW1lbnRzIiwgZm9ybURhdGEpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAiYnVzaW5lc3NfcGVybWl0IikgewogICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVwbG9hZEJ1c2luZXNzUGVybWl0IiwgZm9ybURhdGEpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5pc0ZpbGVVcGxvYWRGYWlsZWQpIHsKICAgICAgICAgIHRoaXMuZmlsZW5hbWUgPSAiRFJBRy9DTElDSyBUTyBVUExPQUQgWU9VUiBGSUxFIEhFUkUiOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEN1cnJlbnRFdmFsdWF0aW9uRmlsZSIsIGZvcm1EYXRhKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGluaXRpYXRlV2ViU29ja2V0KCkgewogICAgICBjb25zb2xlLmxvZygiU3RhcnRpbmcgY29ubmVjdGlvbiB0byBXZWJTb2NrZXQgU2VydmVyIik7CiAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQoCiAgICAgICAgIndzOi8vbG9jYWxob3N0OjgwMDAvd3MvYnVpbGRpbmctZmlsZS11cGxvYWQvIgogICAgICApOwogICAgfSwKICAgIGFzeW5jIGNsb3NlQ29ubmVjdGlvbigpIHsKICAgICAgdGhpcy5jb25uZWN0aW9uLmNsb3NlKCk7CiAgICB9LAogICAgYXN5bmMgc2VuZERhdGEoZGF0YSkgewogICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZChkYXRhKTsKICAgIH0sCiAgICBhc3luYyBzYXZlMihmb3JtRGF0YSkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuaW5pdGlhdGVXZWJTb2NrZXQoKTsKICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICB0aGlzLnNlbmREYXRhKGZvcm1EYXRhKTsKICAgICAgICAgIHRoaXMuY2xvc2VDb25uZWN0aW9uKCk7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9ub3BlbiA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgY29uc29sZS5sb2coIlN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gdGhlIGFwaSB3ZWJzb2NrZXQgc2VydmVyLi4uIik7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uY2xvc2UgPSAoZXZlbnQpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJzdWNjZXNzZnVsbCBjbG9zZWQuIik7CiAgICAgICAgfTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfQogICAgfSwKICAgIGZpbGVzQ2hhbmdlKGZpZWxkTmFtZSwgZmlsZUxpc3QpIHsKICAgICAgLy8gaGFuZGxlIGZpbGUgY2hhbmdlcwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgaWYgKCFmaWxlTGlzdC5sZW5ndGgpIHJldHVybjsKICAgICAgbGV0IHBheWxvYWQgPSB7fTsKICAgICAgLy8gYXBwZW5kIHRoZSBmaWxlcyB0byBGb3JtRGF0YQoKICAgICAgaWYgKCF0aGlzLmlzRXZhbHVhdGlvbikgewogICAgICAgIGxldCBmaWxlID0gdGhpcy4kcmVmc1tgJHt0aGlzLmZpbGVMYWJlbH1gXTsKICAgICAgICBBcnJheS5mcm9tKEFycmF5KGZpbGVMaXN0Lmxlbmd0aCkua2V5cygpKS5tYXAoKHgpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgKHRoaXMudXBsb2FkVHlwZSA9PT0gImFwcGxpY2F0aW9uL3BkZiIgJiYKICAgICAgICAgICAgICBmaWxlTGlzdFt4XVsidHlwZSJdID09PSAiYXBwbGljYXRpb24vcGRmIikgfHwKICAgICAgICAgICAgKHRoaXMudXBsb2FkVHlwZSA9PT0gImltYWdlLyosIGFwcGxpY2F0aW9uL3BkZiIgJiYKICAgICAgICAgICAgICAodGhpcy52YWxpZEltYWdlVHlwZXMuaW5jbHVkZXMoZmlsZUxpc3RbeF1bInR5cGUiXSkgfHwKICAgICAgICAgICAgICAgIGZpbGVMaXN0W3hdWyJ0eXBlIl0gPT09ICJhcHBsaWNhdGlvbi9wZGYiKSkKICAgICAgICAgICkgewogICAgICAgICAgICBpZiAoZmlsZUxpc3RbeF0uc2l6ZSA8PSAyNjIxNDQwMCkgewogICAgICAgICAgICAgIHRoaXMuZmlsZW5hbWUgPSBmaWxlTGlzdFt4XS5uYW1lOwoKICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNQYXltZW50RGV0YWlscykgewogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGZpZWxkTmFtZSwgZmlsZUxpc3RbeF0pOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgIT09ICJidXNpbmVzc19wZXJtaXQiKSB7CiAgICAgICAgICAgICAgICAgIGxldCByZXF1aXJlbWVudF9pZCA9CiAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID09PSAiYnVzaW5lc3MiCiAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuYXBwbGljYXRpb25SZXF1aXJlbWVudHMuaWQKICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5idWlsZGluZ0FwcGxpY2F0aW9uUmVxdWlyZW1lbnRzLmlkOwogICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoInJlcXVpcmVtZW50X2lkIiwgcmVxdWlyZW1lbnRfaWQpOwogICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoInJlcXVpcmVtZW50c19sYWJlbCIsIHRoaXMuZmlsZUxhYmVsKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAiYXBwbGljYXRpb25faWQiLAogICAgICAgICAgICAgICAgICAgIHRoaXMuYnVzaW5lc3NBcHBsaWNhdGlvbi5pZAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlbmFtZSIsIGZpbGVMaXN0W3hdLm5hbWUpOwogICAgICAgICAgICAgICAgLy8gcGF5bG9hZC5yZXF1aXJlbWVudF9pZCA9IHJlcXVpcmVtZW50X2lkOwogICAgICAgICAgICAgICAgLy8gcGF5bG9hZC5yZXF1aXJlbWVudHNfbGFiZWwgPSB0aGlzLmZpbGVMYWJlbDsKICAgICAgICAgICAgICAgIC8vIHBheWxvYWQuZmlsZW5hbWUgPSBmaWxlTGlzdFt4XS5uYW1lOwogICAgICAgICAgICAgICAgLy8gcGF5bG9hZC5maWxlID0gZmlsZUxpc3RbeF0uZmlsZTsKICAgICAgICAgICAgICAgIHRoaXMuc2F2ZShmb3JtRGF0YSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxldCBwYXltZW50Rm9ybURhdGEgPSB0aGlzLnBheW1lbnREZXRhaWxzOwogICAgICAgICAgICAgICAgcGF5bWVudEZvcm1EYXRhLmFwcGVuZCgiZmlsZW5hbWUiLCBmaWxlTGlzdFt4XS5uYW1lKTsKICAgICAgICAgICAgICAgIHBheW1lbnRGb3JtRGF0YS5hcHBlbmQoZmllbGROYW1lLCBmaWxlTGlzdFt4XSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldFBheW1lbnREZXRhaWxzIiwgcGF5bWVudEZvcm1EYXRhKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0SXNGaWxlVXBsb2FkZWQiLCB0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5jbGVhcklucHV0KCk7CiAgICAgICAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogIkZpbGUgaXMgdG9vIGxhcmdlISIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiRmlsZSBzaXplIG11c3Qgbm90IGV4Y2VlZCAyNW1iLiIsCiAgICAgICAgICAgICAgICBpY29uOiAiZXJyb3IiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogIkludmFsaWQgZmlsZSB0eXBlISIsCiAgICAgICAgICAgICAgdGV4dDogIlBsZWFzZSBlbnRlciBhIHZhbGlkIGZpbGUgZm9ybWF0LiIsCiAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgQXJyYXkuZnJvbShBcnJheShmaWxlTGlzdC5sZW5ndGgpLmtleXMoKSkubWFwKCh4KSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICh0aGlzLnVwbG9hZFR5cGUgPT09ICJhcHBsaWNhdGlvbi9wZGYiICYmCiAgICAgICAgICAgICAgZmlsZUxpc3RbeF1bInR5cGUiXSA9PT0gImFwcGxpY2F0aW9uL3BkZiIpIHx8CiAgICAgICAgICAgICh0aGlzLnVwbG9hZFR5cGUgPT09ICJpbWFnZS8qLCBhcHBsaWNhdGlvbi9wZGYiICYmCiAgICAgICAgICAgICAgKHRoaXMudmFsaWRJbWFnZVR5cGVzLmluY2x1ZGVzKGZpbGVMaXN0W3hdWyJ0eXBlIl0pIHx8CiAgICAgICAgICAgICAgICBmaWxlTGlzdFt4XVsidHlwZSJdID09PSAiYXBwbGljYXRpb24vcGRmIikpCiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKGZpbGVMaXN0W3hdLnNpemUgPD0gMjYyMTQ0MDApIHsKICAgICAgICAgICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZUxpc3RbeF0ubmFtZTsKICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoZmllbGROYW1lLCBmaWxlTGlzdFt4XSk7CiAgICAgICAgICAgICAgbGV0IHJlcXVpcmVtZW50X2lkID0KICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9PT0gImJ1c2luZXNzIgogICAgICAgICAgICAgICAgICA/IHRoaXMuYXBwbGljYXRpb25SZXF1aXJlbWVudHMuaWQKICAgICAgICAgICAgICAgICAgOiB0aGlzLmJ1aWxkaW5nQXBwbGljYXRpb25SZXF1aXJlbWVudHMuaWQ7CiAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlbmFtZSIsIGZpbGVMaXN0W3hdLm5hbWUpOwogICAgICAgICAgICAgIHRoaXMuc2F2ZShmb3JtRGF0YSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5jbGVhcklucHV0KCk7CiAgICAgICAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICAgICAgICB0aXRsZTogIkZpbGUgaXMgdG9vIGxhcmdlISIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiRmlsZSBzaXplIG11c3Qgbm90IGV4Y2VlZCAyNW1iLiIsCiAgICAgICAgICAgICAgICBpY29uOiAiZXJyb3IiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRzd2FsKHsKICAgICAgICAgICAgICB0aXRsZTogIkludmFsaWQgZmlsZSB0eXBlISIsCiAgICAgICAgICAgICAgdGV4dDogIlBsZWFzZSBlbnRlciBhIHZhbGlkIGZpbGUgZm9ybWF0LiIsCiAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gc2F2ZSBpdAogICAgfSwKICAgIGNsZWFySW5wdXQoKSB7CiAgICAgIHRoaXMuJHJlZnNbYCR7dGhpcy5maWxlTGFiZWx9YF0udmFsdWUgPSBudWxsOwogICAgICB0aGlzLmZpbGVuYW1lID0gIkRSQUcvQ0xJQ0sgVE8gVVBMT0FEIFlPVVIgRklMRSBIRVJFIjsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["BaseFileUploader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BaseFileUploader.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n  <div class=\"meta-upload-box flex-wrap\">\n    <div class=\"meta-label\">{{ label }}</div>\n    <div class=\"meta-desc\" v-html=\"description\">{{ description }}</div>\n    <div class=\"meta-custom-upload\" :class=\"{ 'has-error': hasError }\">\n      <form enctype=\"multipart/form-data\" novalidate>\n        <input\n          :ref=\"fileLabel\"\n          type=\"file\"\n          :name=\"name\"\n          :accept=\"uploadType\"\n          @input=\"filesChange($event.target.name, $event.target.files)\"\n          :disabled=\"isUploading\"\n        />\n        <!-- <div class=\"meta-text big\">DRAG/CLICK TO UPLOAD YOUR FILE HERE</div> -->\n        <div class=\"meta-text small\">\n          {{\n            filename\n              ? filename\n              : properties.filename\n              ? properties.filename\n              : \"DRAG/CLICK TO UPLOAD YOUR FILE HERE\"\n          }}\n        </div>\n      </form>\n\n      <div class=\"upload-limit\">Note: File size should not exceed 20mb.</div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst STATUS_INITIAL = 0,\n  STATUS_SAVING = 1,\n  STATUS_SUCCESS = 2,\n  STATUS_FAILED = 3;\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"BaseFileUploader\",\n  props: {\n    uploadType: {\n      type: String,\n      default: \"image/*, application/pdf\",\n    },\n    hasError: {\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    label: {\n      type: String,\n      default: \"\",\n    },\n    description: {\n      type: String,\n      default: \"\",\n    },\n    properties: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    type: {\n      type: String,\n      default: \"\",\n    },\n    fileLabel: {\n      type: String,\n      default: \"\",\n    },\n    isEvaluation: {\n      type: Boolean,\n      default: false,\n    },\n    isPaymentDetails: {\n      type: Boolean,\n      default: false,\n    },\n    name: {\n      type: String,\n      default: \"file\",\n    },\n  },\n  data() {\n    return {\n      currentStatus: null,\n      filename: \"\",\n      connection: null,\n      validImageTypes: [\"image/gif\", \"image/jpeg\", \"image/png\"],\n    };\n  },\n  mounted() {\n    this.$store.commit(\"setLoading\", false);\n    this.$store.commit(\"setClearFileInput\", false);\n    this.$store.commit(\"setIsFileReady\", false);\n    this.$store.commit(\"setCurrentEvaluationFile\", new FormData());\n    this.$store.commit(\"setIsFileUploadFailed\", false);\n  },\n  computed: {\n    ...mapGetters([\n      \"applicationRequirements\",\n      \"isUploading\",\n      \"buildingApplicationRequirements\",\n      \"currentEvaluationFile\",\n      \"isUploadSuccess\",\n      \"isFileUploadFailed\",\n      \"paymentDetails\",\n      \"clearFileInput\",\n      \"businessApplication\",\n    ]),\n    isInitial() {\n      return this.currentStatus === STATUS_INITIAL;\n    },\n    isSaving() {\n      return this.currentStatus === STATUS_SAVING;\n    },\n    isSuccess() {\n      return this.currentStatus === STATUS_SUCCESS;\n    },\n    isFailed() {\n      return this.currentStatus === STATUS_FAILED;\n    },\n  },\n  watch: {\n    clearFileInput: {\n      handler(newVal) {\n        if (newVal) {\n          this.clearInput();\n          this.$store.commit(\"setClearFileInput\", false);\n        }\n      },\n    },\n  },\n  methods: {\n    async save(formData) {\n      this.$store.commit(\"setIsFileReady\", true);\n      if (!this.isEvaluation) {\n        if (this.type === \"business\") {\n          await this.$store.dispatch(\"uploadRequirements\", formData);\n        } else if (this.type === \"property\") {\n          await this.$store.dispatch(\"uploadBuildingRequirements\", formData);\n        } else if (this.type === \"business_permit\") {\n          await this.$store.dispatch(\"uploadBusinessPermit\", formData);\n        }\n        if (this.isFileUploadFailed) {\n          this.filename = \"DRAG/CLICK TO UPLOAD YOUR FILE HERE\";\n        }\n      } else {\n        this.$store.commit(\"setCurrentEvaluationFile\", formData);\n      }\n    },\n    async initiateWebSocket() {\n      console.log(\"Starting connection to WebSocket Server\");\n      this.connection = new WebSocket(\n        \"ws://localhost:8000/ws/building-file-upload/\"\n      );\n    },\n    async closeConnection() {\n      this.connection.close();\n    },\n    async sendData(data) {\n      this.connection.send(data);\n    },\n    async save2(formData) {\n      try {\n        this.initiateWebSocket();\n        this.connection.onmessage = (event) => {\n          this.sendData(formData);\n          this.closeConnection();\n        };\n\n        this.connection.onopen = function (event) {\n          console.log(\"Successfully connected to the api websocket server...\");\n        };\n\n        this.connection.onclose = (event) => {\n          console.log(event);\n          console.log(\"successfull closed.\");\n        };\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    filesChange(fieldName, fileList) {\n      // handle file changes\n      var formData = new FormData();\n      if (!fileList.length) return;\n      let payload = {};\n      // append the files to FormData\n\n      if (!this.isEvaluation) {\n        let file = this.$refs[`${this.fileLabel}`];\n        Array.from(Array(fileList.length).keys()).map((x) => {\n          if (\n            (this.uploadType === \"application/pdf\" &&\n              fileList[x][\"type\"] === \"application/pdf\") ||\n            (this.uploadType === \"image/*, application/pdf\" &&\n              (this.validImageTypes.includes(fileList[x][\"type\"]) ||\n                fileList[x][\"type\"] === \"application/pdf\"))\n          ) {\n            if (fileList[x].size <= 26214400) {\n              this.filename = fileList[x].name;\n\n              if (!this.isPaymentDetails) {\n                formData.append(fieldName, fileList[x]);\n\n                if (this.type !== \"business_permit\") {\n                  let requirement_id =\n                    this.type === \"business\"\n                      ? this.applicationRequirements.id\n                      : this.buildingApplicationRequirements.id;\n                  formData.append(\"requirement_id\", requirement_id);\n                  formData.append(\"requirements_label\", this.fileLabel);\n                } else {\n                  formData.append(\n                    \"application_id\",\n                    this.businessApplication.id\n                  );\n                }\n                formData.append(\"filename\", fileList[x].name);\n                // payload.requirement_id = requirement_id;\n                // payload.requirements_label = this.fileLabel;\n                // payload.filename = fileList[x].name;\n                // payload.file = fileList[x].file;\n                this.save(formData);\n              } else {\n                let paymentFormData = this.paymentDetails;\n                paymentFormData.append(\"filename\", fileList[x].name);\n                paymentFormData.append(fieldName, fileList[x]);\n                this.$store.commit(\"setPaymentDetails\", paymentFormData);\n                this.$store.commit(\"setIsFileUploaded\", true);\n              }\n            } else {\n              this.clearInput();\n              this.$swal({\n                title: \"File is too large!\",\n                text: \"File size must not exceed 25mb.\",\n                icon: \"error\",\n              });\n            }\n          } else {\n            this.$swal({\n              title: \"Invalid file type!\",\n              text: \"Please enter a valid file format.\",\n              icon: \"error\",\n            });\n          }\n        });\n      } else {\n        Array.from(Array(fileList.length).keys()).map((x) => {\n          if (\n            (this.uploadType === \"application/pdf\" &&\n              fileList[x][\"type\"] === \"application/pdf\") ||\n            (this.uploadType === \"image/*, application/pdf\" &&\n              (this.validImageTypes.includes(fileList[x][\"type\"]) ||\n                fileList[x][\"type\"] === \"application/pdf\"))\n          ) {\n            if (fileList[x].size <= 26214400) {\n              this.filename = fileList[x].name;\n              formData.append(fieldName, fileList[x]);\n              let requirement_id =\n                this.type === \"business\"\n                  ? this.applicationRequirements.id\n                  : this.buildingApplicationRequirements.id;\n              formData.append(\"filename\", fileList[x].name);\n              this.save(formData);\n            } else {\n              this.clearInput();\n              this.$swal({\n                title: \"File is too large!\",\n                text: \"File size must not exceed 25mb.\",\n                icon: \"error\",\n              });\n            }\n          } else {\n            this.$swal({\n              title: \"Invalid file type!\",\n              text: \"Please enter a valid file format.\",\n              icon: \"error\",\n            });\n          }\n        });\n      }\n      // save it\n    },\n    clearInput() {\n      this.$refs[`${this.fileLabel}`].value = null;\n      this.filename = \"DRAG/CLICK TO UPLOAD YOUR FILE HERE\";\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.meta-upload-box {\n  width: 100%;\n  .meta-label {\n    font-size: 16px;\n    font-weight: bold;\n    margin-bottom: 10px;\n  }\n  .meta-desc {\n    font-size: 14px;\n    padding-left: 17px;\n    margin-bottom: 18px;\n    width: 100%;\n  }\n  .meta-custom-upload {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    width: 100%;\n    padding: 15px 30px;\n    margin: 0 0 30px 17px;\n    border: 3px dashed #bce0fd;\n    transition: 0.4s;\n    input[type=\"file\"] {\n      position: absolute;\n      left: 0;\n      top: 0;\n      z-index: 2;\n      height: 100%;\n      width: 100%;\n      opacity: 0;\n      cursor: pointer;\n    }\n    .meta-text.big {\n      color: #64b4f9;\n      font-size: 30px;\n      font-weight: 700;\n      line-height: 1.6;\n      text-transform: uppercase;\n      width: 100%;\n      text-align: center;\n      transition: 0.4s;\n    }\n    .meta-text.small {\n      color: #64b4f9;\n      font-size: 15px;\n      font-weight: 700;\n      line-height: 1.6;\n      transition: 0.4s;\n    }\n  }\n}\n\n.upload-limit {\n  font-size: 14px;\n  width: 100%;\n  text-align: center;\n  margin-top: 5px;\n  color: #4886ba;\n}\n\ndiv.meta-container .meta-custom-upload:hover {\n  border-color: #039be5;\n}\n\ndiv.meta-container .meta-custom-upload:hover div.meta-text {\n  color: #039be5;\n}\n\n.meta-custom-upload.has-error,\n.meta-custom-upload.has-error .meta-text {\n  border-color: #e23a36;\n  color: #e23a36 !important;\n}\n\n/*\nMOBILE RESPONSIVENESS \n--------------------------------------------------------------*/\n\n@media only screen and (max-width: 768px) {\n  .meta-upload-box .meta-label {\n    font-size: 15px;\n  }\n\n  .meta-upload-box .meta-custom-upload .meta-text.small {\n    font-size: 13px;\n  }\n}\n\n@media only screen and (max-width: 480px) {\n  .meta-upload-box .meta-label {\n    font-size: 13px;\n  }\n\n  .meta-upload-box .meta-desc {\n    font-size: 12px;\n    margin-bottom: 15px;\n  }\n  .meta-upload-box .meta-custom-upload .meta-text.small {\n    font-size: 12px;\n    text-align: center;\n  }\n}\n</style>\n"]}]}