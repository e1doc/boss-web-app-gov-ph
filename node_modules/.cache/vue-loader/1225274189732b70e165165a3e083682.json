{"remainingRequest":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/boss-web/src/components/forms/SoaForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/boss-web/src/components/forms/SoaForm.vue","mtime":1611563006746},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/boss-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCdXR0b25CbG9jayBmcm9tICJAL2NvbXBvbmVudHMvQnV0dG9uQmxvY2siOwppbXBvcnQgQmFzZUlucHV0IGZyb20gIkAvY29tcG9uZW50cy9mb3Jtcy9CYXNlSW5wdXQiOwppbXBvcnQgQmFzZVNlbGVjdCBmcm9tICJAL2NvbXBvbmVudHMvZm9ybXMvQmFzZVNlbGVjdCI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQtdGltZXpvbmUiOwpjb25zdCBvbmVEb2NUb2tlbiA9IHByb2Nlc3MuZW52LlZVRV9BUFBfT05FX0RPQ19UT0tFTjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTb2FGb3JtIiwKICBjb21wb25lbnRzOiB7CiAgICBCdXR0b25CbG9jaywKICAgIEJhc2VJbnB1dCwKICAgIEJhc2VTZWxlY3QsCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICJhZGREZXBhcnRtZW50U3VjY2VzcyIsCiAgICAgICJjdXJyZW50U2VsZWN0ZWRCdXNpbmVzcyIsCiAgICAgICJjdXJyZW50U29hVHlwZSIsCiAgICAgICJjdXJyZW50U2VsZWN0ZWRQcm9wZXJ0eSIsCiAgICBdKSwKICB9LAogIG1vdW50ZWQoKSB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNRdWFydGVyRGlzYWJsZWQ6IGZhbHNlLAogICAgICBxdWFydGVyOiAiIiwKICAgICAgcGF5bW9kZTogIiIsCiAgICAgIHBheW1lbnRPcHRpb25zOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJBbm51YWxseSIsCiAgICAgICAgICB2YWx1ZTogIkEiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJTZW1pLWFubnVhbGx5IiwKICAgICAgICAgIHZhbHVlOiAiUyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIlF1YXJ0ZXJseSIsCiAgICAgICAgICB2YWx1ZTogIlEiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHF1YXJ0ZXJzOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJJIFF1YXJ0ZXIiLAogICAgICAgICAgdmFsdWU6ICIxIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAiSUkgUXVhcnRlciIsCiAgICAgICAgICB2YWx1ZTogIjIiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJJSUkgUXVhcnRlciIsCiAgICAgICAgICB2YWx1ZTogIjMiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICJJViBRdWFydGVyIiwKICAgICAgICAgIHZhbHVlOiAiNCIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgaXNBZHZhbmNlUGF5bWVudDogZmFsc2UsCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uTW9kZVNlbGVjdCgpIHsKICAgICAgaWYgKHRoaXMucGF5bW9kZSA9PSAiQSIpIHsKICAgICAgICB0aGlzLnF1YXJ0ZXIgPSAiNCI7CiAgICAgICAgdGhpcy5pc1F1YXJ0ZXJEaXNhYmxlZCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc1F1YXJ0ZXJEaXNhYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2VuZXJhdGVTb2EodHlwZSkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TG9hZGluZyIsIHRydWUpOwoKICAgICAgICBsZXQgY29uZmlnID0gewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiT25lRG9jLVRva2VuIjogb25lRG9jVG9rZW4sCiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICB9LAogICAgICAgIH07CgogICAgICAgIGlmICh0eXBlID09PSAiYnVzaW5lc3MiKSB7CiAgICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgICAgICBuYW1lOiAiQnVzaW5lc3NUYXhJbnZvY2UiLAogICAgICAgICAgICBwYXJhbTogewogICAgICAgICAgICAgIGFjY291bnRubzogdGhpcy5jdXJyZW50U2VsZWN0ZWRCdXNpbmVzcy5hY2NvdW50X251bWJlciwKICAgICAgICAgICAgICBxdWFydGVyOiB0aGlzLnF1YXJ0ZXIsCiAgICAgICAgICAgICAgcGF5bW9kZTogdGhpcy5wYXltb2RlLAogICAgICAgICAgICB9LAogICAgICAgICAgfTsKCiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICBgaHR0cHM6Ly9hcGkuYmFjb29yLmdvdi5waC9sZ3VhcGkvYCwKICAgICAgICAgICAgcGF5bG9hZCwKICAgICAgICAgICAgY29uZmlnCiAgICAgICAgICApOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwogICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmRhdGEpOwogICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLlJlc3BvbnNlLlJlc3VsdC5tZXNzYWdlICE9PSAiTm8gcmVjb3JkIGZvdW5kLiIpIHsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kbW9kYWwuaGlkZSgic29hTW9kYWwiKTsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goCiAgICAgICAgICAgICAgInN0b3JlR2VuZXJhdGVkQmlsbCIsCiAgICAgICAgICAgICAgcmVzdWx0LmRhdGEuUmVzcG9uc2UuUmVzdWx0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogIkJpbGxzIiB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiAiRmFpbGVkISIsCiAgICAgICAgICAgICAgdGV4dDogcmVzdWx0LmRhdGEuUmVzcG9uc2UuUmVzdWx0Lm1lc3NhZ2UsCiAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgICAgIG5hbWU6ICJSZWFsUHJvcGVydHlUYXhJbnZvY2UiLAogICAgICAgICAgICBwYXJhbTogewogICAgICAgICAgICAgIHJlZm5vOiB0aGlzLmN1cnJlbnRTZWxlY3RlZFByb3BlcnR5LnJlZmVyZW5jZV9pZCwKICAgICAgICAgICAgICBwcm9wZXJ0eV90eXBlOiB0aGlzLmN1cnJlbnRTZWxlY3RlZFByb3BlcnR5LmJ1aWxkaW5nZGV0YWlscwogICAgICAgICAgICAgICAgLnByb3BlcnR5X3R5cGUsCiAgICAgICAgICAgICAgaW5jbHVkZWFkdjogdGhpcy5pc0FkdmFuY2VQYXltZW50ID8gMSA6IDAsCiAgICAgICAgICAgICAgZGF0ZTogbW9tZW50KCkuZm9ybWF0KCJZWVlZLU1NLUREIikudG9TdHJpbmcoKSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICBgaHR0cHM6Ly9hcGkuYmFjb29yLmdvdi5waC9sZ3VhcGkvYCwKICAgICAgICAgICAgcGF5bG9hZCwKICAgICAgICAgICAgY29uZmlnCiAgICAgICAgICApOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwogICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLlJlc3BvbnNlLlJlc3VsdC5tZXNzYWdlICE9PSAiTm8gcmVjb3JkIGZvdW5kLiIpIHsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kbW9kYWwuaGlkZSgic29hTW9kYWwiKTsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goCiAgICAgICAgICAgICAgInN0b3JlR2VuZXJhdGVkQmlsbCIsCiAgICAgICAgICAgICAgcmVzdWx0LmRhdGEuUmVzcG9uc2UuUmVzdWx0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogIkJpbGxzIiB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgICAgIHRpdGxlOiAiRmFpbGVkISIsCiAgICAgICAgICAgICAgdGV4dDogcmVzdWx0LmRhdGEuUmVzcG9uc2UuUmVzdWx0Lm1lc3NhZ2UsCiAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldExvYWRpbmciLCBmYWxzZSk7CiAgICAgICAgZXJyLnJlc3BvbnNlID8gY29uc29sZS5sb2coZXJyLnJlc3BvbnNlKSA6IGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["SoaForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SoaForm.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n  <div class=\"container form-section\">\n    <div class=\"flex-column\" v-if=\"currentSoaType === 'business'\">\n      <h3 class=\"meta-input-label mt10 mb10 text-bold mb20\">\n        Account Number: {{ currentSelectedBusiness.account_number }}\n      </h3>\n      <div class=\"meta-input-label mt10 mb10\">Payment Mode</div>\n      <base-select\n        placeholder=\"--- Select from the options ---\"\n        :options=\"paymentOptions\"\n        v-model=\"paymode\"\n        name=\"selectOptions\"\n        class=\"mb15\"\n        @change.native=\"onModeSelect\"\n      />\n      <div class=\"meta-input-label mt10 mb10\">Payment Quarter</div>\n      <base-select\n        placeholder=\"--- Select from the options ---\"\n        :options=\"quarters\"\n        v-model=\"quarter\"\n        name=\"selectOptions\"\n        :disabled=\"isQuarterDisabled\"\n        class=\"mb15\"\n      />\n      <button-block @click.native=\"generateSoa('business')\"\n        >Submit</button-block\n      >\n    </div>\n    <div class=\"flex-column\" v-if=\"currentSoaType === 'real_property'\">\n      <h4>For Tax Year - {{ new Date(Date.now()) | moment(\"YYYY\") }}</h4>\n      <h3 class=\"meta-input-label mt10 mb10 text-bold mb20\">\n        Tax Dec No. {{ currentSelectedProperty.buildingdetails.tax_dec_no }}\n      </h3>\n      <div class=\"mb30 mt10\">\n        <div class=\"meta-checkbox flex-center\">\n          <input\n            type=\"checkbox\"\n            id=\"is_advance_payment\"\n            v-model=\"isAdvancePayment\"\n          />\n          <div class=\"custom-checkbox flex-center\">\n            <span class=\"check\"\n              ><font-awesome-icon icon=\"check\" class=\"mr5 check-icon\"\n            /></span>\n          </div>\n          <label for=\"legal_docs_1\">Include Advance Payment</label>\n        </div>\n      </div>\n      <div class=\"mb10\">\n        <button-block @click.native=\"generateSoa('real_property')\" class=\"w100\"\n          >Compute</button-block\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ButtonBlock from \"@/components/ButtonBlock\";\nimport BaseInput from \"@/components/forms/BaseInput\";\nimport BaseSelect from \"@/components/forms/BaseSelect\";\nimport { mapGetters } from \"vuex\";\nimport axios from \"axios\";\nimport moment from \"moment-timezone\";\nconst oneDocToken = process.env.VUE_APP_ONE_DOC_TOKEN;\nexport default {\n  name: \"SoaForm\",\n  components: {\n    ButtonBlock,\n    BaseInput,\n    BaseSelect,\n  },\n  computed: {\n    ...mapGetters([\n      \"addDepartmentSuccess\",\n      \"currentSelectedBusiness\",\n      \"currentSoaType\",\n      \"currentSelectedProperty\",\n    ]),\n  },\n  mounted() {},\n  data() {\n    return {\n      isQuarterDisabled: false,\n      quarter: \"\",\n      paymode: \"\",\n      paymentOptions: [\n        {\n          label: \"Annually\",\n          value: \"A\",\n        },\n        {\n          label: \"Semi-annually\",\n          value: \"S\",\n        },\n        {\n          label: \"Quarterly\",\n          value: \"Q\",\n        },\n      ],\n      quarters: [\n        {\n          label: \"I Quarter\",\n          value: \"1\",\n        },\n        {\n          label: \"II Quarter\",\n          value: \"2\",\n        },\n        {\n          label: \"III Quarter\",\n          value: \"3\",\n        },\n        {\n          label: \"IV Quarter\",\n          value: \"4\",\n        },\n      ],\n      isAdvancePayment: false,\n    };\n  },\n\n  methods: {\n    onModeSelect() {\n      if (this.paymode == \"A\") {\n        this.quarter = \"4\";\n        this.isQuarterDisabled = true;\n      } else {\n        this.isQuarterDisabled = false;\n      }\n    },\n    async generateSoa(type) {\n      try {\n        this.$store.commit(\"setLoading\", true);\n\n        let config = {\n          headers: {\n            \"OneDoc-Token\": oneDocToken,\n            \"Content-Type\": \"application/json\",\n          },\n        };\n\n        if (type === \"business\") {\n          const payload = {\n            name: \"BusinessTaxInvoce\",\n            param: {\n              accountno: this.currentSelectedBusiness.account_number,\n              quarter: this.quarter,\n              paymode: this.paymode,\n            },\n          };\n\n          const result = await axios.post(\n            `https://api.bacoor.gov.ph/lguapi/`,\n            payload,\n            config\n          );\n          this.$store.commit(\"setLoading\", false);\n          console.log(result.data);\n          if (result.data.Response.Result.message !== \"No record found.\") {\n            await this.$modal.hide(\"soaModal\");\n            await this.$store.dispatch(\n              \"storeGeneratedBill\",\n              result.data.Response.Result\n            );\n            await this.$router.push({ name: \"Bills\" });\n          } else {\n            this.$swal({\n              title: \"Failed!\",\n              text: result.data.Response.Result.message,\n              icon: \"error\",\n            });\n          }\n        } else {\n          const payload = {\n            name: \"RealPropertyTaxInvoce\",\n            param: {\n              refno: this.currentSelectedProperty.reference_id,\n              property_type: this.currentSelectedProperty.buildingdetails\n                .property_type,\n              includeadv: this.isAdvancePayment ? 1 : 0,\n              date: moment().format(\"YYYY-MM-DD\").toString(),\n            },\n          };\n          const result = await axios.post(\n            `https://api.bacoor.gov.ph/lguapi/`,\n            payload,\n            config\n          );\n          this.$store.commit(\"setLoading\", false);\n          if (result.data.Response.Result.message !== \"No record found.\") {\n            await this.$modal.hide(\"soaModal\");\n            await this.$store.dispatch(\n              \"storeGeneratedBill\",\n              result.data.Response.Result\n            );\n            await this.$router.push({ name: \"Bills\" });\n          } else {\n            this.$swal({\n              title: \"Failed!\",\n              text: result.data.Response.Result.message,\n              icon: \"error\",\n            });\n          }\n        }\n      } catch (err) {\n        this.$store.commit(\"setLoading\", false);\n        err.response ? console.log(err.response) : console.log(err);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.form-section {\n  padding: 15px;\n}\ndiv.meta-checkbox {\n  position: relative;\n  label {\n    font-size: 13px;\n    line-height: 1.6;\n  }\n  input[type=\"checkbox\"] {\n    height: 17px;\n    width: 17px;\n    opacity: 0;\n    left: 0;\n    top: 3px;\n    position: absolute;\n    z-index: 2;\n    cursor: pointer;\n  }\n  .custom-checkbox {\n    height: 15px;\n    width: 15px;\n    border: 2px solid #2593f1;\n    margin-right: 12px;\n    .check-icon {\n      color: #fff;\n      font-size: 14px;\n      display: none;\n    }\n  }\n  input[type=\"checkbox\"]:checked + .custom-checkbox {\n    background-color: #2593f1;\n    .check-icon {\n      display: block;\n    }\n  }\n}\n</style>\n"]}]}